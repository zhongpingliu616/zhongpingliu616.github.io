import{_ as e,x as t,z as a,y as l,o,b as i,f as s,j as r,l as n,k as c,t as d,a1 as u,p as m,m as g,E as F,c as C,g as p,F as f,h as v,n as w,U as E,a2 as _,r as b,w as h,d as x,u as k,B as y,I as A,D as j}from"./index-E36eYFUz.js";import{_ as B}from"./Navigation.fXnM5b3z.js";import{_ as D}from"./CxSearch.C2HbS0jD.js";import{_ as I}from"./CxScrollView.CQ3HxPrx.js";import{_ as L}from"./ProductList.aAvT4MfD.js";import{_ as S}from"./CxTag.DU_-stGW.js";import{a as z}from"./public.3bS5zsGE.js";import"./town._mydTJVR.js";const T=e({__name:"MotherItem",props:{item:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:C}){const p=e,f=C,v=()=>{f("click",p.item)};return(C,p)=>{const f=m,w=t(l("u-icon"),a),E=g,_=F;return o(),i(E,{class:"mother-item",onClick:u(v,["stop"])},{default:s((()=>[r(E,{class:"avatar-box"},{default:s((()=>[r(f,{class:"avatar",src:e.item.avatar,mode:"aspectFill"},null,8,["src"]),e.item.showAdd?(o(),i(E,{key:0,class:"add-icon"},{default:s((()=>[r(w,{name:"plus",color:"#fff",size:"20"})])),_:1})):n("",!0)])),_:1}),r(_,{class:"name"},{default:s((()=>[c(d(e.item.name),1)])),_:1})])),_:1})}}},[["__scopeId","data-v-c8a7efb0"]]),M=e({__name:"MotherGroup",props:{item:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:u}){const E=[{bgColor:"linear-gradient(-45deg, #FFF6F4 40%, #FBE8E4)",textColor:"#8F6A65"},{bgColor:"linear-gradient(-45deg, #FFF4F2 40%, #F6E1DD)",textColor:"#8A645F"},{bgColor:"linear-gradient(-45deg, #FFF7F5 40%, #FBE9E6)",textColor:"#916C67"},{bgColor:"linear-gradient(-45deg, #FDF6F8 40%, #F3E3E9)",textColor:"#8B6C79"},{bgColor:"linear-gradient(-45deg, #FBF2F5 40%, #EEDDE4)",textColor:"#856774"},{bgColor:"linear-gradient(-45deg, #FFF5F8 40%, #F6E4EC)",textColor:"#8F6E7D"},{bgColor:"linear-gradient(-45deg, #F4F8FA 40%, #E6EEF3)",textColor:"#6F8796"},{bgColor:"linear-gradient(-45deg, #F2F6F9 40%, #E3EBF1)",textColor:"#6C8393"},{bgColor:"linear-gradient(-45deg, #F6FAFC 40%, #E9F0F5)",textColor:"#7A90A0"},{bgColor:"linear-gradient(-45deg, #F5F9F7 40%, #E7F0EC)",textColor:"#6F8B82"},{bgColor:"linear-gradient(-45deg, #F2F7F4 40%, #E2EEE9)",textColor:"#6C887F"},{bgColor:"linear-gradient(-45deg, #F7FBF9 40%, #EBF2EF)",textColor:"#7A958C"},{bgColor:"linear-gradient(-45deg, #F9F6F2 40%, #EFE7DE)",textColor:"#8A7B68"},{bgColor:"linear-gradient(-45deg, #F6F3EF 40%, #E6DED4)",textColor:"#807263"},{bgColor:"linear-gradient(-45deg, #FBF8F4 40%, #F1E9DF)",textColor:"#8F806C"},{bgColor:"linear-gradient(-45deg, #F4F2F5 40%, #E6E0E8)",textColor:"#7A6F86"},{bgColor:"linear-gradient(-45deg, #F6F4F8 40%, #E9E5F0)",textColor:"#807598"},{bgColor:"linear-gradient(-45deg, #F2F0F5 40%, #E3DEE9)",textColor:"#766F8C"},{bgColor:"linear-gradient(-45deg, #F7F7F7 40%, #ECECEC)",textColor:"#7B7B7B"},{bgColor:"linear-gradient(-45deg, #F3F3F3 40%, #E4E4E4)",textColor:"#6F6F6F"},{bgColor:"linear-gradient(-45deg, #FAFAFA 40%, #EEEEEE)",textColor:"#888888"},{bgColor:"linear-gradient(-45deg, #FFF8F1 40%, #F5EBDD)",textColor:"#8A745E"},{bgColor:"linear-gradient(-45deg, #FFF5EC 40%, #F2E4D5)",textColor:"#856F59"},{bgColor:"linear-gradient(-45deg, #FFFBF6 40%, #F4EDE3)",textColor:"#8F7A64"},{bgColor:"linear-gradient(-45deg, #F5F6FA 40%, #E6E9F2)",textColor:"#6F7F99"},{bgColor:"linear-gradient(-45deg, #F2F4F8 40%, #E2E6EF)",textColor:"#6B7A92"},{bgColor:"linear-gradient(-45deg, #F7F9FC 40%, #E9EDF5)",textColor:"#7A8AA3"}],_=e,b=C((()=>({colorIndex:Math.floor(Math.random()*E.length)||0,..._.item}))),h=u,x=()=>{h("click",_.item)};return(u,C)=>{const _=m,h=g,k=F,y=t(l("u-icon"),a);return o(),i(h,{class:"mother-group",onClick:x,style:w({background:`${E[b.value.colorIndex].bgColor}`})},{default:s((()=>[r(h,{class:"group-header"},{default:s((()=>[r(h,{class:"avatars"},{default:s((()=>[(o(!0),p(f,null,v(e.item.avatars,((t,a)=>(o(),i(_,{key:a,src:t,class:"mini-avatar",style:w({zIndex:e.item.avatars.length-a-1}),mode:"aspectFill"},null,8,["src","style"])))),128))])),_:1}),r(h,{class:"tag-wrapper"},{default:s((()=>[r(k,{class:"tag",style:w({color:`${E[b.value.colorIndex].textColor}`})},{default:s((()=>[c(d(e.item.tag),1)])),_:1},8,["style"]),r(y,{name:"arrow-right",color:"#666",size:"20"})])),_:1})])),_:1}),r(k,{class:"title",style:w({color:`${E[b.value.colorIndex].textColor}`})},{default:s((()=>[c('"'+d(e.item.title)+'"',1)])),_:1},8,["style"]),r(k,{class:"count",style:w({color:`${E[b.value.colorIndex].textColor}`})},{default:s((()=>[c(d(e.item.count)+"人参与讨论",1)])),_:1},8,["style"]),n("",!0)])),_:1},8,["style"])}}},[["__scopeId","data-v-b37fe5fb"]]),O=e({__name:"DynamicCard",props:{item:{type:Object,default:()=>({})}},emits:["click","follow","like","comment","share"],setup(e,{emit:w}){const b=e,h=w,x=C((()=>{var e;const t=(null==(e=b.item.images)?void 0:e.length)||0;return 1===t?"one":2===t||4===t?"two":"three"})),k=()=>{h("follow",b.item)},y=()=>{h("click",b.item)},A=()=>{h("like",b.item)},j=()=>{h("comment",b.item)},B=()=>{h("share",b.item)};return(C,w)=>{const h=m,D=F,I=t(l("CxTag"),S),L=g,z=t(l("u-icon"),a);return o(),i(L,{class:"dynamic-card"},{default:s((()=>[r(L,{class:"header"},{default:s((()=>[r(L,{class:"user-info"},{default:s((()=>[r(h,{class:"avatar",src:e.item.avatar,mode:"aspectFill"},null,8,["src"]),r(L,{class:"info"},{default:s((()=>[r(L,{class:"name-row"},{default:s((()=>[r(D,{class:"name"},{default:s((()=>[c(d(e.item.name),1)])),_:1}),e.item.isSigned?(o(),i(L,{key:0,class:"mother-tag"},{default:s((()=>[r(I,{text:"签约绣娘",icon:"/static/images/common/work-level.png",textStyle:{color:"#805536"},customStyle:{padding:0}})])),_:1})):n("",!0)])),_:1}),r(D,{class:"time"},{default:s((()=>[c(d(e.item.location)+" · "+d(e.item.time),1)])),_:1})])),_:1})])),_:1}),r(L,{class:E(["follow-btn",{followed:e.item.isFollowed}]),onClick:u(k,["stop"])},{default:s((()=>[r(z,{name:(e.item.isFollowed,"heart-fill"),color:e.item.isFollowed?"#999":"#fff",size:"24"},null,8,["name","color"]),r(D,{class:"btn-text"},{default:s((()=>[c(d(e.item.isFollowed?"已关注":"关注"),1)])),_:1})])),_:1},8,["class"])])),_:1}),r(L,{class:"content",onClick:y},{default:s((()=>[r(D,{class:"text"},{default:s((()=>[c(d(e.item.content),1)])),_:1})])),_:1}),e.item.images&&e.item.images.length>0?(o(),i(L,{key:0,class:"image-grid"},{default:s((()=>[(o(!0),p(f,null,v(e.item.images,((e,t)=>(o(),i(L,{class:E(["image-item",x.value]),key:t,onClick:u((e=>(e=>{_({urls:b.item.images,current:e})})(t)),["stop"])},{default:s((()=>[r(h,{src:e,mode:"aspectFill",class:"img"},null,8,["src"])])),_:2},1032,["class","onClick"])))),128))])),_:1})):n("",!0),r(L,{class:"footer"},{default:s((()=>[r(D,{class:"views"},{default:s((()=>[c("浏览次数"+d(e.item.views),1)])),_:1}),r(L,{class:"actions"},{default:s((()=>[r(L,{class:"action-item",onClick:u(A,["stop"])},{default:s((()=>[r(z,{name:e.item.isLiked?"thumb-up-fill":"thumb-up",color:e.item.isLiked?"#FF6B4B":"#999",size:"32"},null,8,["name","color"]),r(D,{class:E(["count",{active:e.item.isLiked}])},{default:s((()=>[c(d(e.item.likes),1)])),_:1},8,["class"])])),_:1}),r(L,{class:"action-item",onClick:u(j,["stop"])},{default:s((()=>[r(z,{name:"chat",color:"#999",size:"32"}),r(D,{class:"count"},{default:s((()=>[c(d(e.item.comments),1)])),_:1})])),_:1}),r(L,{class:"action-item",onClick:u(B,["stop"])},{default:s((()=>[r(z,{name:"share",color:"#999",size:"32"}),r(D,{class:"count"},{default:s((()=>[c(d(e.item.shares),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-3ba6d8aa"]]),V=e({__name:"index",setup(e){let n=b("社区"),d=b("");const u=b([{id:0,name:"更多绣娘",avatar:"",showAdd:!0},{id:1,name:"张小小",avatar:"https://cdn.uviewui.com/uview/album/1.jpg",showAdd:!0},{id:2,name:"李柳柳",avatar:"https://cdn.uviewui.com/uview/album/2.jpg",showAdd:!0},{id:3,name:"王绣绣",avatar:"https://cdn.uviewui.com/uview/album/3.jpg",showAdd:!0},{id:4,name:"赵芸芸",avatar:"https://cdn.uviewui.com/uview/album/4.jpg",showAdd:!0},{id:5,name:"张小小",avatar:"https://cdn.uviewui.com/uview/album/5.jpg",showAdd:!0},{id:6,name:"李柳柳",avatar:"https://cdn.uviewui.com/uview/album/6.jpg",showAdd:!0},{id:7,name:"王绣绣",avatar:"https://cdn.uviewui.com/uview/album/7.jpg",showAdd:!0},{id:8,name:"赵芸芸",avatar:"https://cdn.uviewui.com/uview/album/8.jpg",showAdd:!0}]),m=b([{id:1,title:"刺绣技术文化讨论",tag:"刺绣达人",count:"36585456",avatars:["https://cdn.uviewui.com/uview/album/1.jpg","https://cdn.uviewui.com/uview/album/2.jpg"]},{id:2,title:"刺绣技法百科全书",tag:"刺绣技法",count:"36585456",avatars:["https://cdn.uviewui.com/uview/album/3.jpg","https://cdn.uviewui.com/uview/album/4.jpg"]},{id:3,title:"刺绣工艺",tag:"刺绣技法",count:"36598455",avatars:["https://cdn.uviewui.com/uview/album/5.jpg","https://cdn.uviewui.com/uview/album/6.jpg"]},{id:4,title:"刺绣现状",tag:"刺绣技法",count:"36561566",avatars:["https://cdn.uviewui.com/uview/album/7.jpg","https://cdn.uviewui.com/uview/album/8.jpg"]}]),C=b(!1),w=b([]),E=b("loadmore"),_=b("flower");let S=1,V=!0,R=!1;const $=async(e=!1)=>{if(e){if(R)return;C.value=!0,S=1,V=!0}if(V&&!R){R=!0,E.value="loading";try{await new Promise((e=>setTimeout(e,1800)));const t=[];t.length<5?(V=!1,E.value="nomore"):E.value="loadmore",w.value=e?t:[...w.value,...t],S++}catch(t){e||(E.value="loadmore"),console.error("加载失败:",t)}finally{R=!1,C.value=!1}}},P=e=>{0===e.id?console.log("更多绣娘"):console.log("点击绣娘",e.name)},N=e=>{console.log("点击群组",e.title)},U=e=>{console.log("点击动态",e.id)},G=e=>{e.isFollowed=!e.isFollowed,j({title:e.isFollowed?"已关注":"已取消关注",icon:"none"})},q=e=>{e.isLiked=!e.isLiked,e.likes+=e.isLiked?1:-1},H=e=>{console.log("评论",e.id)},J=e=>{console.log("转发",e.id)},K=z((()=>{d.value&&(console.log("搜索关键字",d.value),$(!0))}),1200);h(d,(e=>{K()}));const Q=()=>{$(!0)},W=()=>{$()};return x((()=>{$(!0)})),(e,b)=>{const h=t(l("LayoutNavigation"),B),x=t(l("CxSearch"),D),j=g,S=t(l("CxScrollView"),I),z=t(l("BaseProductList"),L),V=t(l("u-icon"),a),R=F,$=A;return o(),i(j,{class:"page-wrap community"},{default:s((()=>[r(h,{title:k(n)},null,8,["title"]),r(j,{class:"search-bar"},{default:s((()=>[r(x,{modelValue:k(d),"onUpdate:modelValue":b[0]||(b[0]=e=>y(d)?d.value=e:d=e)},null,8,["modelValue"])])),_:1}),r(j,{class:"page-content"},{default:s((()=>[r(z,{onOnScrollToLower:W,onOnRefresh:Q,isRefreshing:k(C),loadStatus:k(E),iconType:k(_),enableRefresh:!1,enableLoadMore:!0,class:"scroll-view"},{scrollContain:s((()=>[r(j,{class:"mother-section"},{default:s((()=>[r(S,{class:"mother-list",list:k(u),config:{direction:"x",visibleCount:4.5,gap:"20rpx"}},{item:s((({item:e})=>[r(T,{item:e,onClick:P},null,8,["item"])])),_:1},8,["list"])])),_:1}),r(j,{class:"group-section"},{default:s((()=>[r(S,{class:"group-list",list:k(m),config:{direction:"x",visibleCount:1.8,gap:"20rpx"}},{item:s((({item:e})=>[r(M,{item:e,onClick:N},null,8,["item"])])),_:1},8,["list"])])),_:1}),r(j,{class:"dynamic-list"},{default:s((()=>[(o(!0),p(f,null,v(k(w),((e,t)=>(o(),i(O,{key:t,item:e,onClick:U,onFollow:G,onLike:q,onComment:H,onShare:J},null,8,["item"])))),128))])),_:1})])),_:1},8,["isRefreshing","loadStatus","iconType"])])),_:1}),r(j,{class:"float-btn"},{default:s((()=>[r($,{url:"/pages-gz/community/released"},{default:s((()=>[r(V,{name:"plus",color:"#fff",bold:"",size:"32rpx"}),r(R,{class:"btn-text"},{default:s((()=>[c("发布")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-63c3d3fc"]]);export{V as default};
