import{r as e,c as a,w as t,a as l,o as s,b as n,u as o,_ as i,d as r,e as c,f as u,g as d,F as p,h as m,i as g,j as f,k as v,t as h,l as x,n as y,m as b,p as _,q as w,S as C,s as A,v as S,x as z,y as T,z as X,A as k,B as j,C as V,D as L,E as D,G as R,H as M,I as B,J as F,K as N,L as I,M as K,N as O,O as H,P as U,Q as G,R as P}from"./index-E36eYFUz.js";import{_ as Q}from"./CxSearch.C2HbS0jD.js";import{_ as Z}from"./CustomBar.60VBE6jN.js";import{_ as E}from"./OrderCard.CAQn7VUx.js";import{_ as J}from"./ProductList.aAvT4MfD.js";import{_ as $}from"./CxModal.B62FgOA2.js";import{d as W,g as Y,t as q,n as ee,a as ae,b as te}from"./xn.B6pvNNd_.js";import{u as le}from"./public.3bS5zsGE.js";import{_ as se}from"./Search.DxweAvzb.js";import{_ as ne}from"./CxScrollView.CQ3HxPrx.js";import{_ as oe}from"./TitleList.BIKxI3sy.js";import{_ as ie}from"./ProductCol.CABxG2wB.js";import"./CxTag.DU_-stGW.js";import"./CxComfirmBtn.D_Y-qTM9.js";import"./town._mydTJVR.js";import"./uni-icons.DKvk8G6K.js";const re={__name:"RolseTabs",props:{modelValue:{type:Number,default:0},tabItems:{type:Array,default:()=>[{name:"我是绣娘"},{name:"我是公众"}]},itemStyle:{type:Object,default:()=>({})},lineBg:{type:String,default:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAASCAMAAAA0cZ07AAABSlBMVEUAAAD/VQD/VVX/QED/KgD/Kir/VSr/VVX/f1X/TTPoRi7/Ri7tNyTtWzf5STH5Tzf5VTf5Wz3/STH/VTf/W0P4TDT4Uzn4Uzv4XD/7TDT7XD/4Kxz6Qi76Qy77Y0f7ZUf9fFn4Khz4Qy76ZEb7e1j7fVj6UTn6Tzf6Vjz6Vz76UDn6VTz6WT/5Tjb5Ujn5VDz7Tjb7Wj/4LB35QC35Qy/7Zkj8e1j8fFn4LB35Kxz5QC35Qy/7Y0b7Zkn8fFn8fVr4Kx34LB34LB74LR/4Lh/4LyD4MCH4MSL4MyL4NCP5NST5NiX5OCb5OSf5Oij5PCn5PSr5Pyv5QC35Qi76Tzf6UTn6Ujr6VDv6Vjz6Vz77ZUf7Zkj7aEr7aUv7a0z7bE37bk77b0/7cFD7clH7c1L8dFP8dVT8dlX8eFX8eVb8elf8e1j8fFj8fFlFVbOBAAAAQHRSTlMAAwMEBgYGBgYKCwsODioqKioqKip1dXV1dXWQkJCQkJCRkZGRkaChoaGiouLj4+Pj4+7u7u7u7u/v7+/v7+/vJ9rf/wAAANxJREFUOMtjYMALmJkZKAGcnBRpZ2OjSDu/AEXaxcQp0c2tp8+NXwWLtJGTs4urm7uHp5e3j6+ff0CgsQwrVFItLFwDymSXN42JjYtPSExKTklNS8/IzMo2U+BgkHZwRNceFCwL1sGlHhoWHqHJBebIRUWja8/JVWCwxKbdmpGTlU9UNwSkPVJHQpCNk8kGm3Z77NpNGHlYhSQNINoNpUTYeLFrN2dQxKZdCRJwyI5XxqZdFRh0FujarZRgQacVFq4NDzpbdO12KhyURhwtkw0Dv/BAZhkKMyyh4gIA26VeW8woj3cAAAAASUVORK5CYII="},activeStyle:{type:Object,default:()=>({})},inactiveStyle:{type:Object,default:()=>({})},scrollable:{type:Boolean,default:!1},lineWidth:{type:String,default:"60rpx"},lineHeight:{type:String,default:"18rpx"}},emits:["changeTab","update:modelValue"],setup(i,{emit:r}){const c={color:"#D62B2B",fontWeight:"bold",transform:"scale(1.05)",fontSize:"32rpx"},u={color:"#999",fontSize:"32rpx"},d={paddingLeft:"15rpx",paddingRight:"15rpx",height:"80rpx"},p=i;let m=e(p.modelValue);const g=r,f=a((()=>({...c,...p.activeStyle}))),v=a((()=>({...u,...p.inactiveStyle}))),h=a((()=>({...d,...p.itemStyle})));function x({index:e,name:a}){m.value=e,g("update:modelValue",e),g("changeTab",{index:e,item:p.tabItems[e]})}return t((()=>p.modelValue),(e=>{m.value=e})),(e,a)=>{const t=l("up-tabs");return s(),n(t,{list:i.tabItems,lineWidth:i.lineWidth,lineHeight:i.lineHeight,lineColor:i.lineBg.includes("base64")?`url(${i.lineBg}) 100% 100%`:i.lineBg,activeStyle:o(f),inactiveStyle:o(v),itemStyle:o(h),scrollable:i.scrollable,current:o(m),lineBgSize:"100% 110%",onChange:x,class:"base-role-tabs"},null,8,["list","lineWidth","lineHeight","lineColor","activeStyle","inactiveStyle","itemStyle","scrollable","current"])}}},ce=i({__name:"CxSwiperUni",props:{list:{type:Array,default:()=>[]},swiperHeight:{type:String,default:"300rpx"},config:{type:Object,default:()=>({})}},emits:["change"],setup(t,{emit:l}){const i={indicatorDots:!0,autoplay:!1,interval:3e3,duration:500,vertical:!1,circular:!0},S=t,z=l,T=a((()=>({...i,...S.config}))),X=e([]);r((()=>{X.value=S.list.map(((e,a)=>"video"===e.type?c(`video-${a}`):null))}));const k=e=>{V();const a=e.detail.current,t=S.list[a];z("change",{index:a,item:t})},j=e=>{X.value.forEach(((a,t)=>{a&&t!==e&&a.pause()}))},V=()=>{X.value.forEach((e=>{e&&e.pause()}))};return(e,a)=>{const l=b,i=_,r=w,c=C,S=A;return s(),n(S,{class:"cx-swiper-uni",style:y({"--swiper-height":t.swiperHeight}),circular:o(T).circular,"indicator-dots":o(T).indicatorDots,"indicator-active-color":o(T).indicatorActiveColor,"active-class":o(T).activeClass,autoplay:o(T).autoplay,interval:o(T).interval,duration:o(T).duration,vertical:o(T).vertical,onChange:k},{default:u((()=>[(s(!0),d(p,null,m(t.list,((a,t)=>(s(),n(c,{key:t},{default:u((()=>["text"===a.type?g(e.$slots,"text",{key:0,item:a,index:t},(()=>[f(l,{class:"swiper-text"},{default:u((()=>[v(h(a.text),1)])),_:2},1024)]),!0):"image"===a.type?g(e.$slots,"image",{key:1,item:a,index:t},(()=>[f(i,{class:"swiper-image",src:a.src,mode:"aspectFill"},null,8,["src"])]),!0):"video"===a.type?g(e.$slots,"video",{key:2,item:a,index:t,play:()=>j(t)},(()=>[f(r,{class:"swiper-video",id:`video-${t}`,src:a.src,poster:a.poster,controls:"",onPlay:e=>j(t)},null,8,["id","src","poster","onPlay"])]),!0):x("",!0)])),_:2},1024)))),128))])),_:3},8,["style","circular","indicator-dots","indicator-active-color","active-class","autoplay","interval","duration","vertical"])}}},[["__scopeId","data-v-a7be43c6"]]),ue=i({__name:"Search",emits:["close"],setup(a,{emit:i}){let c=e("");const g=i;e(null);let y=e(!1);e(10);let _=e(!1);const w=e([]);e(3);const C=e([]),A=e(!1),M=e(!1),B=e(1),F=e(10),N=e(!1),I=e("loadmore"),K=e("flower"),O=async(e=!1)=>{if((!A.value||e)&&(!M.value||e)&&(!N.value||e)){e?(B.value=1,N.value=!1,M.value=!0,I.value="loading"):(A.value=!0,I.value="loading");try{const a=await q({page_no:B.value,page_size:F.value,keyword:c.value}),t=200===a.code&&a.data.lists||[];t.length<F.value?(N.value=!0,I.value="nomore"):I.value="loadmore",e?(C.value=t,R()):C.value=[...C.value,...t],B.value++}catch(a){I.value="loadmore",console.error("数据加载失败:",a),L({title:"加载失败",icon:"none"})}finally{A.value=!1,M.value=!1}}},H=()=>{M.value||O(!0)},U=()=>{A.value||N.value||O()},G=e=>{V({url:`/pages-xn/collection-detail/index?id=${e.id}`})},P=e=>{1==e.rush_status?V({url:`/pages-xn/my/deposit?id=${e.id}`,success:a=>{a.eventChannel.emit("sendMarginDatas",{marginResultData:e})},fail:e=>{console.error("跳转失败",e)}}):L({title:"等级不足，无法抢单",icon:"none"})},Z=async()=>{try{const e=await W({type:2});200===e.code?(w.value=[],_.value=!1,L({title:"搜索历史已清空",icon:"success"})):L({title:e.msg||"清空失败",icon:"none"})}catch(e){console.error("清空历史失败",e),L({title:"请求异常",icon:"none"})}},ee=()=>{_.value=!0},ae=()=>{g("close")},te=le((e=>{(e=>{c.value||e?O(!0).then((()=>{se()})):L({title:"请输入搜索内容",icon:"none"})})(e)}),1800);t(c,(e=>{e&&console.log("搜索",e)}));const se=async()=>{try{const e=await Y();if(200===e.code){const a=e.data||[];w.value=Array.isArray(a)?a:a.lists||[]}}catch(e){console.error("获取搜索历史失败",e)}};return r((()=>{se(),S((()=>{y.value=!0}))})),(e,a)=>{const t=z(T("CxSearch"),Q),i=b,r=l("up-col"),g=D,y=l("up-row"),A=z(T("u-icon"),X),S=z(T("u-tag"),k),V=z(T("XnOrdersOrderCard"),E),L=z(T("BaseProductList"),J),R=z(T("CxModal"),$);return s(),d(p,null,[f(i,{class:"search-wrap search"},{default:u((()=>[f(i,{class:"search-bar-wrap"},{default:u((()=>[f(y,{customStyle:"margin-bottom: 10px"},{default:u((()=>[f(r,{span:"10"},{default:u((()=>[f(i,{class:"search-bar"},{default:u((()=>[f(t,{modelValue:o(c),"onUpdate:modelValue":a[0]||(a[0]=e=>j(c)?c.value=e:c=e),placeholder:"输入搜索内容",showAction:"","action-text":"搜索",onSearch:o(te),onCustom:o(te)},null,8,["modelValue","onSearch","onCustom"])])),_:1})])),_:1}),f(r,{span:"2"},{default:u((()=>[f(i,{class:"bell-pic"},{default:u((()=>[f(g,{class:"cancel-text",onClick:ae},{default:u((()=>[v("取消")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),o(w).length?(s(),n(i,{key:0,class:"history-search-container"},{default:u((()=>[o(c)?x("",!0):(s(),d(p,{key:0},[f(i,{class:"header"},{default:u((()=>[f(g,{class:"title"},{default:u((()=>[v("历史搜索")])),_:1}),f(A,{name:"trash",size:"20",color:"rgba(225, 210, 211, 1)",onClick:ee})])),_:1}),f(i,{class:"tags-container"},{default:u((()=>[(s(!0),d(p,null,m(o(w),((e,a)=>(s(),n(S,{key:a,text:e,shape:"circle",borderColor:"rgba(245, 234, 201, .6)",color:"#F5EAC9",plain:"",style:{margin:"8rpx",padding:"1rpx 4rpx"},onClick:a=>{return t=e,c.value=t,void O(!0);var t}},null,8,["text","onClick"])))),128))])),_:1})],64))])),_:1})):x("",!0),f(i,{class:"search-result"},{default:u((()=>[f(g,{class:"search-result-text"},{default:u((()=>[v("共个"+h(o(C).length)+"搜索结果",1)])),_:1}),f(L,{onOnScrollToLower:U,onOnRefresh:H,isRefreshing:o(M),loadStatus:o(I),iconType:o(K),enableRefresh:!1,enableLoadMore:!0},{scrollContain:u((()=>[(s(!0),d(p,null,m(o(C),((e,a)=>(s(),n(V,{item:e,onGrabOrderClick:P,onHandleItemClick:G},null,8,["item"])))),256))])),_:1},8,["isRefreshing","loadStatus","iconType"])])),_:1})])),_:1}),f(R,{show:o(_),"onUpdate:show":a[1]||(a[1]=e=>j(_)?_.value=e:_=e),content:"确定要清空历史搜索吗？",onConfirm:Z},null,8,["show"])],64)}}},[["__scopeId","data-v-f48a4150"]]),de=i({__name:"Xn",emits:["showSearch"],setup(a,{emit:t}){let i=e();const c=[{src:"/static/images/index/order-management.png",title:"订单管理",funtionText:"管理",path:"/pages-xn/orders/order-management"},{src:"/static/images/index/work-management.png",title:"作品管理",funtionText:"管理",path:"/pages-xn/my/work-management"}],g=e([]),x=t;e(3);let y=e({});const w=e([]),C=e(!1),A=e(!1),S=e(1),k=e(10),j=e(!1),M=e("loadmore"),B=e("flower");let F=e(0),N=e({});const I=async(e=!1)=>{if((!C.value||e)&&(!A.value||e)&&(!j.value||e)){e?(S.value=1,j.value=!1,A.value=!0,M.value="loading"):(C.value=!0,M.value="loading");try{const a=await q({page_no:S.value,page_size:k.value}),t=200===a.code&&a.data.lists||[];t.length<k.value?(j.value=!0,M.value="nomore"):M.value="loadmore",e?(w.value=t,R()):w.value=[...w.value,...t],S.value++}catch(a){M.value="loadmore",console.error("数据加载失败:",a),L({title:"加载失败",icon:"none"})}finally{C.value=!1,A.value=!1}}},K=()=>{A.value||I(!0)},O=()=>{C.value||j.value||I()},H=e=>{V({url:`/pages-xn/collection-detail/index?id=${e.id}`})},U=async e=>{await(async e=>{if(!e.id)return void L({title:"订单ID不能为空",icon:"none"});const{code:a,msg:t,data:l={}}=await ae({id:e.id});200==a?(L({title:"订单创建成功",icon:"success"}),y.value=l.lists||{},y.value.id=e.id,setTimeout((()=>{V({url:`/pages-xn/my/deposit?id=${e.id}`,success:a=>{a.eventChannel.emit("sendMarginDatas",{marginResultData:{...e,...y.value}})},fail:e=>{console.error("跳转失败",e)}})}),1500)):L({title:t||"订单创建失败",icon:"none"})})(e)};r((()=>{I(),(async()=>{try{const e=await ee(),a=200===e.code&&e.data.lists||[];if(a.length>0){let e=[];a.forEach((a=>{e.push({...a,type:"text",text:a.title})})),g.value=e}}catch(e){console.error("公告数据加载失败:",e)}})()}));const G=()=>{x("showSearch")},P=({index:e,item:a})=>{console.log("藏品列表点击",e,a)},Q=({index:e,item:a})=>{F.value=e||0,N.value=a||{}};return(e,a)=>{const t=l("up-image"),r=l("up-col"),x=z(T("CxSwiperUni"),ce),y=b,C=l("up-row"),S=_,k=l("up-icon"),j=D,L=l("up-button"),R=z(T("CxScrollView"),ne),F=z(T("u-icon"),X),N=z(T("XnOrdersOrderCard"),E),I=z(T("BaseProductList"),J),Z=z(T("CommonTitleList"),oe);return s(),d(p,null,[f(y,{class:"announcement"},{default:u((()=>[f(C,{customStyle:"margin-bottom: 10px"},{default:u((()=>[f(r,{span:"1"},{default:u((()=>[f(t,{"show-loading":!0,src:"/static/images/index/volume.png",width:"50rpx",height:"50rpx"})])),_:1}),f(r,{span:"10"},{default:u((()=>[f(x,{list:o(g),swiperHeight:"36rpx",config:{indicatorDots:!1,autoplay:!0,vertical:!0},onChange:Q},null,8,["list"])])),_:1}),f(r,{span:"1"},{default:u((()=>[f(y,{class:"arrow-icon"})])),_:1})])),_:1})])),_:1}),f(y,{class:"collection-list"},{default:u((()=>[f(y,{class:"collection-content"},{default:u((()=>[f(R,{class:"list",ref_key:"cxScrollViewRef",ref:i,list:c,config:{direction:"x",visibleCount:2,gap:"10rpx"},onClick:P},{item:u((({item:e})=>[f(y,{class:"manage-shortcut-entrance"},{default:u((()=>[f(S,{class:"shortcut-entrance-img",mode:"widthFix",src:e.src},null,8,["src"]),f(y,{class:"manage-shortcut-content"},{default:u((()=>[f(y,{class:"manage-shortcut-title"},{default:u((()=>[v(h(e.title),1)])),_:2},1024),f(y,{class:"manage-shortcut-links"},{default:u((()=>[f(L,{shape:"circle",color:"#1F5994",customStyle:{width:"auto",display:"inline-block",padding:"0rpx 22rpx",fontSize:"24rpx",height:"auto"},onClick:a=>(e=>{console.warn("跳转地址",e.path),V({url:e.path})})(e)},{default:u((()=>[f(j,null,{default:u((()=>[v(h(e.funtionText)+" ",1),f(k,{name:"arrow-right",size:"24rpx",color:"#A0BAD2",class:"shortcut-icon"})])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},512)])),_:1})])),_:1}),f(y,{class:"order-list-wrap"},{default:u((()=>[f(Z,{title:"订单列表"},{more:u((()=>[f(y,{class:"bell-pic",onClick:G},{default:u((()=>[f(F,{name:"/static/images/orders/filter.png",size:"42rpx"})])),_:1})])),default:u((()=>[f(y,{class:"index-order-list"},{default:u((()=>[f(I,{onOnScrollToLower:O,onOnRefresh:K,isRefreshing:o(A),loadStatus:o(M),iconType:o(B),enableRefresh:!1,enableLoadMore:!0},{scrollContain:u((()=>[(s(!0),d(p,null,m(o(w),((e,a)=>(s(),n(N,{item:e,onGrabOrderClick:U,onHandleItemClick:H},null,8,["item"])))),256))])),_:1},8,["isRefreshing","loadStatus","iconType"])])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-c46757c0"]]),pe=i({__name:"Gz",emits:["itemClick","showSearch"],setup(a,{emit:t}){const{proxy:n}=F(),i=e(!1),c=e([]),m=e("loadmore"),g=e("flower");let x=1,y=!0,w=!1;const C=e([{type:"text",text:"您的第一期收益已到账”“NFT藏品XXX价格上涨10%"},{type:"text",text:"您的第二期收益已到账”“NFT藏品XXX价格上涨10%2"},{type:"text",text:"您的第三期收益已到账”“NFT藏品XXX价格上涨10%3 您的第二期收益已到账”“NFT藏品XXX价格上涨10%"},{type:"text",text:"您的第四期收益已到账”“NFT藏品XXX价格上涨10%4"}]),A=[{src:"/static/images/gz/index/my-clt.png",text:"实物藏品",path:"/pages/gz/collectibles/index"},{src:"/static/images/gz/index/my-collection.png",text:"我的收藏",path:"/pages/gz/my/index"},{src:"/static/images/gz/index/nft-logo.png",text:"NFT藏品",path:"/pages/gz/collectibles/index"},{src:"/static/images/gz/index/rwa-logo.png",text:"我的积分",path:"/pages-gz/my/my-asset"},{src:"/static/images/index/swiper-1.png",text:"您的第二期收益已到账”“NFT藏品XXX价格上涨10%2"},{src:"/static/images/index/swiper-3.png",text:"您的第三期收益已到账”“NFT藏品XXX价格上涨10%3 您的第二期收益已到账”“NFT藏品XXX价格上涨10%"},{src:"/static/images/index/swiper-1.png",text:"您的第四期收益已到账”“NFT藏品XXX价格上涨10%4"}],S=()=>{M({url:"/pages/gz/collectibles/index"})},X=async e=>{if(e){if(w)return;i.value=!0,x=1,y=!0}if(y&&!w){w=!0,m.value="loading";try{const a=await j(x,10);a&&Array.isArray(a.list)?(c.value=e?a.list:[...c.value,...a.list],x++,y=a.hasMore??!1,m.value=y?"loadmore":"nomore"):(e&&(c.value=[]),m.value="nomore")}catch(a){e||(m.value="loadmore"),console.error("加载失败:",a)}finally{w=!1,i.value=!1}}},k=e=>{V({url:`/pages/my/login?title=${e.title}&index=${e.orderIndex}`})},j=async(e,a)=>{await new Promise((e=>setTimeout(e,800)));return{list:Array.from({length:a},((t,l)=>({id:(e-1)*a+l+1,image:`https://picsum.photos/seed/${Math.random()}/120/80`,artist:"李柳柳",title:"东方美学 | 绣春花"+(Math.random()>.5?"东方美学 | 绣春花":""),price:666.66}))),hasMore:e<3}},L=()=>{X(!0)},R=()=>{y&&!w&&X()};return r((()=>{X(!0)})),(e,a)=>{const t=l("up-image"),r=l("up-col"),x=z(T("CxSwiperUni"),ce),y=b,w=l("up-row"),X=_,j=z(T("CxScrollView"),ne),F=D,N=B,I=z(T("CommonProductCol"),ie),K=z(T("BaseProductList"),J),O=z(T("CommonTitleList"),oe);return s(),d(p,null,[f(y,{class:"announcement"},{default:u((()=>[f(w,{customStyle:"margin-bottom: 10px"},{default:u((()=>[f(r,{span:"1"},{default:u((()=>[f(t,{"show-loading":!0,src:"/static/images/index/volume.png",width:"50rpx",height:"50rpx"})])),_:1}),f(r,{span:"10"},{default:u((()=>[f(x,{list:o(C),swiperHeight:"36rpx",config:{indicatorDots:!1,autoplay:!0,vertical:!0}},null,8,["list"])])),_:1}),f(r,{span:"1"},{default:u((()=>[f(y,{class:"arrow-icon"})])),_:1})])),_:1})])),_:1}),f(y,{class:"index-nft"},{default:u((()=>[f(j,{class:"list",ref:"cxScrollViewRef",list:A,config:{direction:"x",visibleCount:4}},{item:u((({item:e})=>[f(y,{class:"item-content",onClick:a=>(e=>{if(n.$u.toast(`${e.text}`),!e.path)return;["/pages/index","/pages/xn/orders/index","/pages/xn/income/index","/pages/xn/my/index","/pages/gz/collectibles/index","/pages/gz/income/index","/pages/gz/my/index"].includes(e.path)?M({url:e.path}):V({url:e.path})})(e)},{default:u((()=>[f(X,{class:"nft-img",mode:"aspectFill",src:e.src},null,8,["src"]),f(y,{class:"nft-des up-text-ellipsis"},{default:u((()=>[v(h(e.text),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:1},512)])),_:1}),f(y,{class:"activity-bulletin-board"},{default:u((()=>[f(y,{class:"board-content"},{default:u((()=>[f(y,{class:"board-info"},{default:u((()=>[f(F,{class:"board-title"},{default:u((()=>[v("双十二 · 线下展会")])),_:1}),f(F,{class:"board-desc"},{default:u((()=>[v("国际会展中心展出巨量藏品，快来一起看看")])),_:1})])),_:1}),f(y,{class:"board-btn"},{default:u((()=>[f(N,{class:"btn",url:"/pages-gz/offline-exhibition","open-type":"navigate"},{default:u((()=>[f(F,{class:"btn-text"},{default:u((()=>[v("立即报名")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),f(y,{class:"recommend-product"},{default:u((()=>[f(O,{title:"推荐藏品",onMore:S},{default:u((()=>[f(y,{class:"recommend-content"},{default:u((()=>[f(K,{onOnScrollToLower:R,onOnRefresh:L,isRefreshing:o(i),loadStatus:o(m),iconType:o(g),enableRefresh:!1},{scrollContain:u((()=>[f(I,{colNum:2,productList:o(c),onClick:k},null,8,["productList"])])),_:1},8,["isRefreshing","loadStatus","iconType"])])),_:1})])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-0329039c"]]),me=i({__name:"index",setup(t){var i;N((e=>({"746ae768":m})));const{proxy:c}=F(),m=c.$safeAreaInfo.top+"rpx",g={IndexXn:de,IndexGz:pe},v=e([{id:1,type:"image",src:`https://picsum.photos/seed/${Math.random()}/220/120`,name:"Banner 1"},{id:2,type:"image",src:`https://picsum.photos/seed/${Math.random()}/220/120`,name:"Banner 2"},{id:3,type:"image",src:`https://picsum.photos/seed/${Math.random()}/220/120`,name:"Banner 3"}]),h=I();let _=e(1);const w=e(h.currentRole);e(0),e("1200");let C=e(0),A=e(!1),S=e([]);const X=e("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAASCAMAAAA0cZ07AAAA9lBMVEUAAAD//6r//7//1Kr//6r//9T/5rPo0aLo0bno6KLo6Lnt26Tt27bz26rz4bDz4bbz57z03q704LP047nz2J7z3Kb02J703Kj05r/25sH26srz153z3Kf05b706sj04bH04bH04rX04rb04LL047X147j03q/04K/04bP04bT047fz157z26bz3Kf05sH06sjz2J7z2Z7z26Xz3Kj05sH06sn15r/z2J7z2J/z2aDz2aHz2qLz2qPz2qTz26Xz26bz3Kf04LD04LH04bL04bT04rX04rb15sD158H158L158P16MT16MX16cX16cb16cf16sj16smb3zkwAAAAN3RSTlMAAwQGBgYKCwsLCw4OKioqKnV1dZCQkJCQkJCRkZGRoKGhoaKi4uPj4+Pj7u7u7u7v7+/v7+/vMgiCywAAAM5JREFUOMtjYMALmJgYKAFsbBRpZ2amSDs/P0XahYQo0c2poclFwHci2uZQYGFpaWVtY2unIwrzsbyziyKUySqp5+nl7ePr5x8QEAgB+lKsDCLm5uja7R3EwTrYFZycXVyVOMAcCXcPdO2BgVIMhti0GzOyMfMKqjmCtLupCvOzsDGaYdNuil27LiM3M5+gOkS7lrAAKw927foM0ti0y2A6XhabdjkGZjEDdO1GMrCgU3Z2UYEHnQm6dlM5VkojjpbJhtJES2GWoTDDEiouANDFSl0mbzP2AAAAAElFTkSuQmCC"),k=e({color:"#FFF"}),D=e({color:"#CCBCBC"}),R=e([{name:"公众端",rolse:"IndexGz"},{name:"绣娘端",rolse:"IndexXn"}]);let M=(null==(i=h.userInfo)?void 0:i.token)||K("token"),B=e(!1),E=e(!1);const J=e(!0),$=()=>{"XN"===w.value?V({url:"/pages-xn/my/system-notification",success:e=>{e.eventChannel.emit("sendMessageDatas",{messageListsData:S.value})}}):"GZ"===w.value&&V({url:"/pages-gz/my/system-notification",success:e=>{e.eventChannel.emit("sendMessageDatas",{messageListsData:S.value})}})},W=()=>{"XN"===w.value?B.value=!0:E.value=!0},Y=a((()=>g[R.value[C.value].rolse])),q=({index:e,item:a})=>{if("IndexXn"===a.rolse){const{level:a,real_name_check:t}=h.userInfo;if(0==a)return V({url:"/pages-xn/level/index"}),void L({title:"请先选择等级",icon:"none"});if(2==t)return V({url:"/pages-xn/my/identity-authentication"}),void L({title:"请先完成实名认证",icon:"none"});h.setRole("XN"),w.value="XN",C.value=e}else h.setRole("GZ"),w.value="GZ",C.value=e},ee=({index:e,item:a})=>{_.value=e};return r((()=>{(async()=>{var e,a;try{const t=await te();200===t.code&&t.data.lists&&(v.value=null==(a=null==(e=null==t?void 0:t.data)?void 0:e.lists)?void 0:a.map((e=>({...e,type:"image",src:e.image,name:e.name||"",id:e.id}))))}catch(t){console.error("获取Banner失败",t)}})(),(async()=>{var e,a,t;try{const l=await P();if(200===l.code&&(null==(e=null==l?void 0:l.data)?void 0:e.lists)){S.value=(null==(a=null==l?void 0:l.data)?void 0:a.lists)||[];const e=null==(t=null==l?void 0:l.data)?void 0:t.lists.filter((e=>1!=e.is_read));A.value=e.length>0}else A.value=!1}catch(l){console.error("获取消息列表失败",l),A.value=!1}})()})),O((()=>{})),H((()=>{var e;M=(null==(e=h.userInfo)?void 0:e.token)||K("token"),w.value=h.currentRole||K("currentRole")||"GZ",M?("XN"===w.value?C.value=1:C.value=0,J.value=!0):U({url:"/pages/login"})})),(e,a)=>{const t=b,i=z(T("BaseRolseTabs"),re),r=l("up-col"),c=z(T("CxSearch"),Q),m=l("up-icon"),g=l("up-badge"),_=l("up-row"),w=z(T("CxSwiperUni"),ce),S=z(T("LayoutCustomBar"),Z),V=z(T("XnIndexSearch"),ue),L=l("up-popup"),M=z(T("GzIndexSearch"),se);return s(),d(p,null,[f(t,{class:"page-wrap index"},{default:u((()=>[f(t,{style:y({paddingTop:e.$safeAreaInfo.top+"rpx"})},null,8,["style"]),f(t,{class:"page-content"},{default:u((()=>[f(_,{customStyle:"margin-bottom: 10px"},{default:u((()=>[o(J)?(s(),n(r,{key:0,span:(o(J),4)},{default:u((()=>[f(t,{class:"tabs-wrap"},{default:u((()=>[f(i,{tabItems:o(R),modelValue:o(C),itemStyle:{padding:"0"},lineBg:o(X),activeStyle:o(k),inactiveStyle:o(D),onChangeTab:q,class:"role-change-tabs"},null,8,["tabItems","modelValue","lineBg","activeStyle","inactiveStyle"])])),_:1})])),_:1},8,["span"])):x("",!0),f(r,{span:(o(J),6)},{default:u((()=>[f(t,{class:"search-bar"},{default:u((()=>[f(c,{placeholder:"输入搜索内容",onFocus:W})])),_:1})])),_:1},8,["span"]),f(r,{span:"2"},{default:u((()=>[f(t,{class:"bell-pic"},{default:u((()=>[f(t,{class:"icon-wrapper",onClick:$},{default:u((()=>[f(m,{size:"58rpx",color:"#fff",name:"bell"}),f(g,{isDot:o(A),class:"badge-dot"},null,8,["isDot"])])),_:1})])),_:1})])),_:1})])),_:1}),f(t,{class:"banner-swiper"},{default:u((()=>[f(w,{list:o(v),swiperHeight:"380rpx",config:{autoplay:!0,indicatorActiveColor:"rgba(255,255,255,.6)"},onChange:ee},null,8,["list","config"])])),_:1}),(s(),n(G,null,[(s(),n(T(o(Y)),{onShowSearch:W},null,32))],1024))])),_:1}),"XN"==o(h).currentRole?(s(),n(S,{key:0,type:"xn"})):(s(),n(S,{key:1,type:"gz"}))])),_:1}),(s(),n(G,null,[f(L,{show:o(B),bgColor:"#691e23",mode:"right",duration:100,safeAreaInsetTop:"",customStyle:"width: 750rpx;"},{default:u((()=>[f(V,{onClose:a[0]||(a[0]=e=>j(B)?B.value=!1:B=!1)})])),_:1},8,["show"])],1024)),(s(),n(G,null,[f(L,{show:o(E),bgColor:"#691e23",mode:"right",duration:100,safeAreaInsetTop:"",customStyle:"width: 750rpx;"},{default:u((()=>[f(M,{showTabs:!1,onClose:a[1]||(a[1]=e=>j(E)?E.value=!1:E=!1)})])),_:1},8,["show"])],1024))],64)}}},[["__scopeId","data-v-db21802f"]]);export{me as default};
