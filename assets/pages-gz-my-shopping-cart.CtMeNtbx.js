import{_ as e,r as a,c as t,d as l,C as s,D as c,b as o,f as u,m as r,aB as i,aC as n,o as d,j as f,H as m,u as p,k as _,t as g,g as v,h,F as x,l as C,y as k,A as y,aA as b,aO as j,p as A}from"./index-Cklw5-2D.js";import{_ as w}from"./Navigation.DJK0J8h_.js";import{_ as V}from"./CxCheckbox.DivmWNr9.js";import{_ as $}from"./CxTag.b7zN5PMZ.js";import{_ as B}from"./CxComfirmBtn.C_6MRR7B.js";const D=e({__name:"shopping-cart",setup(e){let D=a("购物车"),F=a(!1);const T=Array.from({length:20},((e,a)=>({id:`EMB-2024-00${a+1}`,selected:!1,image:`https://picsum.photos/seed/${Math.random()}/120/80`,title:`古韵民族丝绸非遗刺绣${a}`,price:666.66,count:2}))),U=a([]),z=a(!1),E=a(!1),M=a(!1),N=a(1),R=a(20),H=t((()=>U.value.length>0&&U.value.every((e=>e.selected)))),I=t((()=>U.value.filter((e=>e.selected)).length)),L=t((()=>U.value.filter((e=>e.selected)).reduce(((e,a)=>e+a.price*a.count),0))),O=()=>{const e=!H.value;U.value.forEach((a=>{a.selected=e}))};l((()=>{P()}));const P=async(e=!1)=>{e&&(N.value=1,U.value=[],M.value=!1),M.value||(z.value=!0,setTimeout((()=>{const a=(N.value-1)*R.value,t=a+R.value,l=T.slice(a,t);l.length>0?(U.value=[...U.value,...l],N.value++):M.value=!0,z.value=!1,e&&(E.value=!1)}),2200))},Q=()=>{E.value=!0,P(!0)},S=()=>{P()};return(e,a)=>{const t=y,l=s(c("LayoutNavigation"),w),T=r,N=s(c("CxCheckbox"),V),R=A,P=s(c("CxTag"),$),q=s(c("u-loading-icon"),i),G=s(c("u-empty"),n),J=b,K=s(c("CxComfirmBtn"),B);return d(),o(T,{class:"page-wrap index"},{default:u((()=>[f(l,{title:p(D)},{right:u((()=>[f(t,{class:"management-cart",onClick:a[0]||(a[0]=e=>m(F)?F.value=!p(F):F=!p(F))},{default:u((()=>[_(g(p(F)?"取消":"管理"),1)])),_:1})])),_:1},8,["title"]),f(T,{class:"page-content"},{default:u((()=>[f(T,{class:"cart-container"},{default:u((()=>[f(J,{"scroll-y":!0,onRefresherrefresh:Q,onScrolltolower:S,"refresher-enabled":!0,"refresher-triggered":p(E),"refresher-default-style":"transparent","refresher-background":"transparent","enable-back-to-top":!0,class:"scroll-view"},{default:u((()=>[(d(!0),v(x,null,h(p(U),((e,a)=>(d(),o(T,{key:e.id,class:"cart-item"},{default:u((()=>[f(T,{class:"shopping-item-title"},{default:u((()=>[f(t,{class:"item-id"},{default:u((()=>[_("编号："+g(e.id),1)])),_:2},1024)])),_:2},1024),f(T,{class:"cart-item-content"},{default:u((()=>[f(T,{class:"checkbox-wrapper"},{default:u((()=>[f(N,{modelValue:e.selected,"onUpdate:modelValue":a=>e.selected=a,size:36},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),f(T,{class:"item-content"},{default:u((()=>[f(R,{src:e.image,mode:"aspectFill",class:"item-image"},null,8,["src"]),f(T,{class:"item-info"},{default:u((()=>[f(T,{class:"item-title"},{default:u((()=>[_(g(e.title),1)])),_:2},1024),f(T,{class:"item-tags"},{default:u((()=>[f(P,{text:"假一赔四"}),_("  "),f(P,{text:"7天无理由退换"})])),_:1}),f(T,{class:"item-price"},{default:u((()=>[_("¥"+g(e.price),1)])),_:2},1024)])),_:2},1024),p(F)?(d(),o(T,{key:0,class:"item-actions"},{default:u((()=>[f(T,{class:"count-box"},{default:u((()=>[f(t,{class:"btn",onClick:a=>(e=>{e.count>1&&e.count--})(e)},{default:u((()=>[_("−")])),_:2},1032,["onClick"]),f(t,{class:"count"},{default:u((()=>[_(g(e.count),1)])),_:2},1024),f(t,{class:"btn",onClick:a=>(e=>{e.count++})(e)},{default:u((()=>[_("+")])),_:2},1032,["onClick"])])),_:2},1024),f(t,{class:"delete",onClick:e=>(e=>{j({title:"提示",content:"确认删除该商品吗？",confirmColor:"#D1A156",success:a=>{a.confirm&&U.value.splice(e,1)}})})(a)},{default:u((()=>[_("删除")])),_:2},1032,["onClick"])])),_:2},1024)):(d(),o(T,{key:1,class:"item-count"},{default:u((()=>[_("x"+g(e.count),1)])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),p(z)&&!p(E)?(d(),o(q,{key:0,show:!0,mode:"circle",text:"加载中...",class:"loading"})):C("",!0),p(U).length>0&&!p(z)&&p(M)?(d(),o(G,{key:1,text:"没有更多商品啦~",textColor:"#D1A156",iconColor:"#ccc",mode:"list",class:"empty"})):C("",!0),0!==p(U).length||p(z)?C("",!0):(d(),o(G,{key:2,text:"购物车空空如也",textColor:"#D1A156",iconColor:"#ccc",mode:"shopping",class:"empty"}))])),_:1},8,["refresher-triggered"])])),_:1})])),_:1}),f(T,{class:"cart-bar"},{default:u((()=>[f(T,{class:"left"},{default:u((()=>[f(N,{"model-value":p(H),"onUpdate:modelValue":O,size:36},null,8,["model-value"]),f(t,{class:"select-all"},{default:u((()=>[_("全选")])),_:1})])),_:1}),f(T,{class:"right"},{default:u((()=>[f(T,{class:"price"},{default:u((()=>[_(" 合计： "),f(t,{class:"amount"},{default:u((()=>[_("¥"+g(p(L).toFixed(2)),1)])),_:1})])),_:1}),f(T,{class:k(["checkout",{disabled:0===p(I)}])},{default:u((()=>[f(K,{text:`结算${p(I)}`,disabled:0===p(I)},null,8,["text","disabled"])])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-241a75e2"]]);export{D as default};
