import{_ as l,r as e,c as a,w as s,B as t,o as c,b as o,f as n,j as r,u as i,y as u,n as v,g as p,F as x,h as d,i as f,m as h,aC as y}from"./index-DiJpDbC3.js";const g=l({__name:"CxScrollView",props:{list:{type:Array,default:()=>[]},config:{type:Object,default:()=>({text:{lines:1,color:"#F5EAC9",fontSize:"20rpx",lineHeight:"32rpx"}})},activeIndex:{type:Number,default:0}},emits:["scroll","change","click","update:activeIndex"],setup(l,{expose:g,emit:m}){const I={direction:"x",visibleCount:null,gap:"0rpx",snap:!0},_=l;let w=e(_.activeIndex);const C=m,b=a((()=>({...I,..._.config}))),k=a((()=>{const l=E.value;return(750-(parseInt(b.value.gap)||0)*(l-1))/l}));s((()=>_.activeIndex),(l=>{l!==w.value&&(w.value=l,L(l))}));const M=l=>{const e=_.list.length-1,a=Math.max(0,Math.min(l,e));a!==w.value&&(w.value=a,C("update:activeIndex",a),C("change",a))};a((()=>({lines:1,color:"#F5EAC9",fontSize:"20rpx",lineHeight:"32rpx",...b.value.text||{}})));const S=l=>{const e=T.value?l.detail.scrollLeft:l.detail.scrollTop,a=k.value+parseInt(b.value.gap||0),s=Math.round(e/a);M(s),C("scroll",l)},T=a((()=>"x"===b.value.direction)),$=a((()=>"y"===b.value.direction)),j=a((()=>T.value?"is-x":"is-y")),A=e(0),F=e(0),z=e(null),E=a((()=>b.value.visibleCount||4)),H=a((()=>{const l=E.value,e=b.value.gap||"0rpx";return T.value?{width:parseInt(e)>0?`calc((100% - ${l-1} * ${e}) / ${l})`:100/l+"%",flexShrink:0}:{height:100/l+"%"}})),N=a((()=>({gap:b.value.gap}))),B=async()=>{if(!b.value.snap)return;await t();const l=750/E.value,e=T.value?A.value:F.value,a=Math.round(e/l);L(a)},L=async l=>{await t();const e=750/E.value;w.value=Math.max(0,l),M(l),T.value?A.value=w.value*e:F.value=w.value*e,C("change",w.value)};return g({scrollToIndex:L,scrollToNext:()=>L(w.value+1),scrollToPrev:()=>L(w.value-1),activeIndex:w}),(e,a)=>{const s=h,t=y;return c(),o(s,{class:"cx-scroll-wrapper"},{default:n((()=>[r(t,{ref_key:"scrollRef",ref:z,class:"cx-scroll-view","scroll-x":i(T),"scroll-y":i($),"scroll-with-animation":!0,"show-scrollbar":!1,"scroll-left":i(A),"scroll-top":i(F),onScroll:S,onTouchend:B},{default:n((()=>[r(s,{class:u(["cx-scroll-list",i(j)]),style:v(i(N))},{default:n((()=>[(c(!0),p(x,null,d(l.list,((l,a)=>(c(),o(s,{key:a,class:"cx-scroll-item",style:v(i(H)),onClick:e=>((l,e)=>{C("click",{item:l,index:e})})(l,a)},{default:n((()=>[f(e.$slots,"item",{item:l,index:a},void 0,!0)])),_:2},1032,["style","onClick"])))),128))])),_:3},8,["class","style"])])),_:3},8,["scroll-x","scroll-y","scroll-left","scroll-top"])])),_:3})}}},[["__scopeId","data-v-64f24b21"]]);export{g as _};
