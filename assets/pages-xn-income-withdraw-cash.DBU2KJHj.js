import{_ as a,K as e,r as l,c as t,d as o,x as s,y as n,a as c,b as u,f as r,J as i,a9 as d,D as m,m as p,z as f,a0 as _,o as h,j as x,u as g,k as b,B as v,t as y,g as C,h as k,F,ao as w,C as I,E as z}from"./index-E36eYFUz.js";import{_ as j}from"./Navigation.fXnM5b3z.js";import{_ as N}from"./CxComfirmBtn.D_Y-qTM9.js";import{_ as S}from"./CxIconFont.D1tnD14h.js";import{_ as U}from"./uni-icons.DKvk8G6K.js";const V=a({__name:"withdraw-cash",setup(a){e((a=>({"48668f29":$})));const{proxy:V}=i(),$=V.$safeAreaInfo.top+80+"rpx";let A=l("余额提现");l(22123),l(212334);const B=l(""),D=l(0),E=l([]),L=a=>a.toLocaleString("zh-CN",{minimumFractionDigits:2}),J=()=>{B.value=L(V.$globalUserInfo.amount),console.log("全部提现",B.value)},K=()=>{const a=Number(B.value);a<1&&0!==a&&(m("每次提现不得少于1元"),B.value="")},W=t((()=>{const a=Number(B.value);return a>=1&&a<=V.$globalUserInfo.amount})),q=()=>{W.value&&(m("提现申请已提交，请等待到账"),E.value[D.value].id?w({amount:B.value,user_bank_id:E.value[D.value].id}).then((a=>{200===a.code?(m("提现申请已提交，请等待到账"),B.value=""):m({title:a.msg||"提现申请提交失败",icon:"none"})})):m("请选择提现方式"))},G=()=>{I({url:"/pages-xn/income/withdrawal-record"})};return o((()=>{(async()=>{const{code:a=9999,data:e,msg:l}=await d();200===a?(null==e?void 0:e.lists.length)>0&&e.lists.forEach((a=>{1==a.type?E.value.push({...a,name:a.account_name,icon:"&#xe607;",color:"#07c160"}):2==a.type?E.value.push({...a,name:a.account_name,icon:"&#xe60a;",color:"#1677FF"}):3==a.type&&E.value.push({...a,name:a.account_name,icon:"&#xe63f;",color:"#FFA937"})})):m({title:l||"数据加载失败",icon:"none"})})()})),(a,e)=>{const l=s(n("LayoutNavigation"),j),t=z,o=c("up-count-to"),i=p,d=s(n("CxComfirmBtn"),N),m=c("up-input"),w=s(n("CxIconFont"),S),I=s(n("u-icon"),f),V=s(n("uni-icons"),U),$=s(n("u-button"),_);return h(),u(i,{class:"page-wrap withdraw-cash-page"},{default:r((()=>[x(l,{title:g(A)},null,8,["title"]),x(i,{class:"page-content"},{default:r((()=>[x(i,{class:"card balance-card"},{default:r((()=>[x(i,{class:"left"},{default:r((()=>[x(t,{class:"label"},{default:r((()=>[b("¥")])),_:1}),x(t,{class:"amount"},{default:r((()=>[x(o,{endVal:a.$globalUserInfo.amount,separator:",",fontSize:"48rpx",color:"#523027"},null,8,["endVal"])])),_:1})])),_:1}),x(i,{class:"right"},{default:r((()=>[x(i,{class:"cash-btn"},{default:r((()=>[x(d,{text:"提现记录",onClick:G,btnStyle:{height:"40rpx",width:"120rpx",padding:"0rpx 10rpx",background:"none",color:"#523027",borderColor:"#523027"},textStyle:{fontSize:"24rpx",fontWeight:"bold"}})])),_:1})])),_:1})])),_:1}),x(i,{class:"card amount-card"},{default:r((()=>[x(t,{class:"title"},{default:r((()=>[b("提现金额")])),_:1}),x(i,{class:"input-wrapper"},{default:r((()=>[x(t,{class:"yen"},{default:r((()=>[b("¥")])),_:1}),x(m,{modelValue:g(B),"onUpdate:modelValue":e[0]||(e[0]=a=>v(B)?B.value=a:null),type:"number",placeholder:"请输入提现金额",class:"input",onInput:K},null,8,["modelValue"]),x(t,{class:"all",onClick:J},{default:r((()=>[b("全部提现")])),_:1})])),_:1}),x(t,{class:"tip"},{default:r((()=>[b("可提现金额：¥"+y(L(a.$globalUserInfo.amount))+", 每次提现不得少于1元",1)])),_:1})])),_:1}),x(i,{class:"card method-card"},{default:r((()=>[x(t,{class:"title"},{default:r((()=>[b("提现方式")])),_:1}),x(i,{class:"method-list"},{default:r((()=>[(h(!0),C(F,null,k(g(E),((a,e)=>(h(),u(i,{key:e,class:"method-item",onClick:a=>(a=>{D.value=a})(e)},{default:r((()=>[x(i,{class:"left"},{default:r((()=>[x(w,{code:a.icon,size:"40rpx",color:a.color},null,8,["code","color"]),b("    "),x(t,null,{default:r((()=>[b(y(a.account_name)+" "+y(a.opening_bank),1)])),_:2},1024)])),_:2},1024),g(D)==e?(h(),u(I,{key:0,name:"checkmark-circle-fill",color:"#FF4D4F",size:"30rpx"})):(h(),u(V,{key:1,type:"circle",color:"#ccc",size:"30rpx"}))])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),x(i,{class:"submit-btn"},{default:r((()=>[x($,{type:"error",shape:"circle",disabled:!g(W),onClick:q},{default:r((()=>[b("立即提现")])),_:1},8,["disabled"])])),_:1})])),_:1}),x(i)])),_:1})}}},[["__scopeId","data-v-20563839"]]);export{V as default};
