import{_ as e,L as a,r as t,au as s,d as n,O as l,x as o,y as i,b as c,f as r,D as d,m as u,o as m,j as p,u as x,g as _,h as g,F as v,ag as f,l as k,C,k as y,t as h,E as b}from"./index-E36eYFUz.js";import{_ as I}from"./Navigation.fXnM5b3z.js";import{_ as w,a as L}from"./LevelCard.7WLLOFxr.js";import{_ as j}from"./CxComfirmBtn.D_Y-qTM9.js";import{r as N,u as S}from"./xn.B6pvNNd_.js";const A=e({__name:"index",setup(e){const A=a(),D=t(1);let B=t("等级选择"),q=t(!1),E=t(1),F=s([]);const O=s([{text:"身份验证"},{text:"等级选择"}]),U=async()=>{q.value=!0;const{name:e,deposit:a=0,id:t}=F[E.value-1],{code:s,data:n,msg:l}=await S();q.value=!1,200===s?(await A.updateUserInfo("XN",{level:n.level,is_buy:n.is_buy,real_name_check:n.real_name_check}),C({url:"/pages-xn/my/identity-authentication",success(t){t.eventChannel.emit("acceptLevelData",{selectIndex:E,name:e,deposit:a})}})):100014===s?(d({title:l||"更新失败",icon:"none"}),C({url:"/pages-xn/my/identity-authentication",success(t){t.eventChannel.emit("acceptLevelData",{selectIndex:E,name:e,deposit:a})}})):d({title:l||"更新失败",icon:"none"})};return n((async()=>{((e={})=>{const{code:a=9999,data:t,msg:s}=e;200===a?(null==t?void 0:t.lists.length)>0&&F.splice(0,F.length,...t.lists):d({title:s||"数据加载失败",icon:"none"})})(await N()||{})})),l((()=>{})),(e,a)=>{const t=o(i("LayoutNavigation"),I),s=o(i("CommonStep"),w),n=u,l=o(i("CommonLevelCard"),L),d=b,C=o(i("CxComfirmBtn"),j);return m(),c(n,{class:"page-wrap grab-order"},{default:r((()=>[p(t,{title:x(B)},null,8,["title"]),p(n,{class:"page-content"},{default:r((()=>[p(n,{class:"u-block-box"},{default:r((()=>[p(s,{blockSteps:x(O),currentStep:x(D)},null,8,["blockSteps","currentStep"])])),_:1}),p(n,{class:"cloud-list"},{default:r((()=>[(m(!0),_(v,null,g(x(F),((e,a)=>(m(),c(l,{key:e.name,cardIndex:a+1,selectIndex:x(E),levelName:e.name,guaranteedAmount:e.deposit,works:e.content,onClick:()=>(e=>{E.value=e+1})(a)},null,8,["cardIndex","selectIndex","levelName","guaranteedAmount","works","onClick"])))),128))])),_:1}),x(F).length?(m(),_(v,{key:0},[p(n,{class:"margin-instruction"},{default:r((()=>[f("h5",{class:"level-title"},"等级说明："),(m(!0),_(v,null,g(x(F),((e,a)=>(m(),c(d,{class:"margin-instruction-text",key:e.name},{default:r((()=>[y(h(a+1)+"档("+h(e.deposit)+"元) ",1)])),_:2},1024)))),128))])),_:1}),p(n,{class:"enter-wrap"},{default:r((()=>[p(C,{text:"进入",loading:x(q),onClick:U},null,8,["loading"])])),_:1})],64)):k("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-5a325dbd"]]);export{A as default};
