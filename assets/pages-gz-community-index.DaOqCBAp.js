import{_ as e,C as t,E as a,D as l,o,b as i,f as s,j as r,l as n,k as c,t as u,Z as d,p as m,m as g,A as F,c as p,g as v,F as C,h as f,n as w,y as b,as as h,r as E,w as _,d as x,u as k,H as y,b5 as j,J as A}from"./index-CFeN5XM9.js";import{_ as B}from"./Navigation.B6I6j3Nc.js";import{_ as D}from"./CxSearch.DVcid7Df.js";import{_ as L}from"./CxScrollView.D5sPV7mm.js";import{_ as I}from"./ProductList.X_LjGJfO.js";import{_ as S}from"./CxTag.c9OneOu4.js";const z=e({__name:"MotherItem",props:{item:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:p}){const v=e,C=p,f=()=>{C("click",v.item)};return(p,v)=>{const C=m,w=t(l("u-icon"),a),b=g,h=F;return o(),i(b,{class:"mother-item",onClick:d(f,["stop"])},{default:s((()=>[r(b,{class:"avatar-box"},{default:s((()=>[r(C,{class:"avatar",src:e.item.avatar,mode:"aspectFill"},null,8,["src"]),e.item.showAdd?(o(),i(b,{key:0,class:"add-icon"},{default:s((()=>[r(w,{name:"plus",color:"#fff",size:"20"})])),_:1})):n("",!0)])),_:1}),r(h,{class:"name"},{default:s((()=>[c(u(e.item.name),1)])),_:1})])),_:1})}}},[["__scopeId","data-v-c8a7efb0"]]),T=e({__name:"MotherGroup",props:{item:{type:Object,default:()=>({})}},emits:["click"],setup(e,{emit:d}){const b=[{bgColor:"linear-gradient(-45deg, #FFF6F4 40%, #FBE8E4)",textColor:"#8F6A65"},{bgColor:"linear-gradient(-45deg, #FFF4F2 40%, #F6E1DD)",textColor:"#8A645F"},{bgColor:"linear-gradient(-45deg, #FFF7F5 40%, #FBE9E6)",textColor:"#916C67"},{bgColor:"linear-gradient(-45deg, #FDF6F8 40%, #F3E3E9)",textColor:"#8B6C79"},{bgColor:"linear-gradient(-45deg, #FBF2F5 40%, #EEDDE4)",textColor:"#856774"},{bgColor:"linear-gradient(-45deg, #FFF5F8 40%, #F6E4EC)",textColor:"#8F6E7D"},{bgColor:"linear-gradient(-45deg, #F4F8FA 40%, #E6EEF3)",textColor:"#6F8796"},{bgColor:"linear-gradient(-45deg, #F2F6F9 40%, #E3EBF1)",textColor:"#6C8393"},{bgColor:"linear-gradient(-45deg, #F6FAFC 40%, #E9F0F5)",textColor:"#7A90A0"},{bgColor:"linear-gradient(-45deg, #F5F9F7 40%, #E7F0EC)",textColor:"#6F8B82"},{bgColor:"linear-gradient(-45deg, #F2F7F4 40%, #E2EEE9)",textColor:"#6C887F"},{bgColor:"linear-gradient(-45deg, #F7FBF9 40%, #EBF2EF)",textColor:"#7A958C"},{bgColor:"linear-gradient(-45deg, #F9F6F2 40%, #EFE7DE)",textColor:"#8A7B68"},{bgColor:"linear-gradient(-45deg, #F6F3EF 40%, #E6DED4)",textColor:"#807263"},{bgColor:"linear-gradient(-45deg, #FBF8F4 40%, #F1E9DF)",textColor:"#8F806C"},{bgColor:"linear-gradient(-45deg, #F4F2F5 40%, #E6E0E8)",textColor:"#7A6F86"},{bgColor:"linear-gradient(-45deg, #F6F4F8 40%, #E9E5F0)",textColor:"#807598"},{bgColor:"linear-gradient(-45deg, #F2F0F5 40%, #E3DEE9)",textColor:"#766F8C"},{bgColor:"linear-gradient(-45deg, #F7F7F7 40%, #ECECEC)",textColor:"#7B7B7B"},{bgColor:"linear-gradient(-45deg, #F3F3F3 40%, #E4E4E4)",textColor:"#6F6F6F"},{bgColor:"linear-gradient(-45deg, #FAFAFA 40%, #EEEEEE)",textColor:"#888888"},{bgColor:"linear-gradient(-45deg, #FFF8F1 40%, #F5EBDD)",textColor:"#8A745E"},{bgColor:"linear-gradient(-45deg, #FFF5EC 40%, #F2E4D5)",textColor:"#856F59"},{bgColor:"linear-gradient(-45deg, #FFFBF6 40%, #F4EDE3)",textColor:"#8F7A64"},{bgColor:"linear-gradient(-45deg, #F5F6FA 40%, #E6E9F2)",textColor:"#6F7F99"},{bgColor:"linear-gradient(-45deg, #F2F4F8 40%, #E2E6EF)",textColor:"#6B7A92"},{bgColor:"linear-gradient(-45deg, #F7F9FC 40%, #E9EDF5)",textColor:"#7A8AA3"}],h=e,E=p((()=>({colorIndex:Math.floor(Math.random()*b.length)||0,...h.item}))),_=d,x=()=>{_("click",h.item)};return(d,p)=>{const h=m,_=g,k=F,y=t(l("u-icon"),a);return o(),i(_,{class:"mother-group",onClick:x,style:w({background:`${b[E.value.colorIndex].bgColor}`})},{default:s((()=>[r(_,{class:"group-header"},{default:s((()=>[r(_,{class:"avatars"},{default:s((()=>[(o(!0),v(C,null,f(e.item.avatars,((t,a)=>(o(),i(h,{key:a,src:t,class:"mini-avatar",style:w({zIndex:e.item.avatars.length-a-1}),mode:"aspectFill"},null,8,["src","style"])))),128))])),_:1}),r(_,{class:"tag-wrapper"},{default:s((()=>[r(k,{class:"tag",style:w({color:`${b[E.value.colorIndex].textColor}`})},{default:s((()=>[c(u(e.item.tag),1)])),_:1},8,["style"]),r(y,{name:"arrow-right",color:"#666",size:"20"})])),_:1})])),_:1}),r(k,{class:"title",style:w({color:`${b[E.value.colorIndex].textColor}`})},{default:s((()=>[c('"'+u(e.item.title)+'"',1)])),_:1},8,["style"]),r(k,{class:"count",style:w({color:`${b[E.value.colorIndex].textColor}`})},{default:s((()=>[c(u(e.item.count)+"人参与讨论",1)])),_:1},8,["style"]),n("",!0)])),_:1},8,["style"])}}},[["__scopeId","data-v-b37fe5fb"]]),M=e({__name:"DynamicCard",props:{item:{type:Object,default:()=>({})}},emits:["click","follow","like","comment","share"],setup(e,{emit:w}){const E=e,_=w,x=p((()=>{var e;const t=(null==(e=E.item.images)?void 0:e.length)||0;return 1===t?"one":2===t||4===t?"two":"three"})),k=()=>{_("follow",E.item)},y=()=>{_("click",E.item)},j=()=>{_("like",E.item)},A=()=>{_("comment",E.item)},B=()=>{_("share",E.item)};return(p,w)=>{const _=m,D=F,L=t(l("CxTag"),S),I=g,z=t(l("u-icon"),a);return o(),i(I,{class:"dynamic-card"},{default:s((()=>[r(I,{class:"header"},{default:s((()=>[r(I,{class:"user-info"},{default:s((()=>[r(_,{class:"avatar",src:e.item.avatar,mode:"aspectFill"},null,8,["src"]),r(I,{class:"info"},{default:s((()=>[r(I,{class:"name-row"},{default:s((()=>[r(D,{class:"name"},{default:s((()=>[c(u(e.item.name),1)])),_:1}),e.item.isSigned?(o(),i(I,{key:0,class:"mother-tag"},{default:s((()=>[r(L,{text:"签约绣娘",icon:"/static/images/common/work-level.png",textStyle:{color:"#805536"},customStyle:{padding:0}})])),_:1})):n("",!0)])),_:1}),r(D,{class:"time"},{default:s((()=>[c(u(e.item.location)+" · "+u(e.item.time),1)])),_:1})])),_:1})])),_:1}),r(I,{class:b(["follow-btn",{followed:e.item.isFollowed}]),onClick:d(k,["stop"])},{default:s((()=>[r(z,{name:(e.item.isFollowed,"heart-fill"),color:e.item.isFollowed?"#999":"#fff",size:"24"},null,8,["name","color"]),r(D,{class:"btn-text"},{default:s((()=>[c(u(e.item.isFollowed?"已关注":"关注"),1)])),_:1})])),_:1},8,["class"])])),_:1}),r(I,{class:"content",onClick:y},{default:s((()=>[r(D,{class:"text"},{default:s((()=>[c(u(e.item.content),1)])),_:1})])),_:1}),e.item.images&&e.item.images.length>0?(o(),i(I,{key:0,class:"image-grid"},{default:s((()=>[(o(!0),v(C,null,f(e.item.images,((e,t)=>(o(),i(I,{class:b(["image-item",x.value]),key:t,onClick:d((e=>(e=>{h({urls:E.item.images,current:e})})(t)),["stop"])},{default:s((()=>[r(_,{src:e,mode:"aspectFill",class:"img"},null,8,["src"])])),_:2},1032,["class","onClick"])))),128))])),_:1})):n("",!0),r(I,{class:"footer"},{default:s((()=>[r(D,{class:"views"},{default:s((()=>[c("浏览次数"+u(e.item.views),1)])),_:1}),r(I,{class:"actions"},{default:s((()=>[r(I,{class:"action-item",onClick:d(j,["stop"])},{default:s((()=>[r(z,{name:e.item.isLiked?"thumb-up-fill":"thumb-up",color:e.item.isLiked?"#FF6B4B":"#999",size:"32"},null,8,["name","color"]),r(D,{class:b(["count",{active:e.item.isLiked}])},{default:s((()=>[c(u(e.item.likes),1)])),_:1},8,["class"])])),_:1}),r(I,{class:"action-item",onClick:d(A,["stop"])},{default:s((()=>[r(z,{name:"chat",color:"#999",size:"32"}),r(D,{class:"count"},{default:s((()=>[c(u(e.item.comments),1)])),_:1})])),_:1}),r(I,{class:"action-item",onClick:d(B,["stop"])},{default:s((()=>[r(z,{name:"share",color:"#999",size:"32"}),r(D,{class:"count"},{default:s((()=>[c(u(e.item.shares),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-3ba6d8aa"]]),O=e({__name:"index",setup(e){let n=E("社区"),u=E("");const d=E([{id:0,name:"更多绣娘",avatar:"",showAdd:!0},{id:1,name:"张小小",avatar:"https://cdn.uviewui.com/uview/album/1.jpg",showAdd:!0},{id:2,name:"李柳柳",avatar:"https://cdn.uviewui.com/uview/album/2.jpg",showAdd:!0},{id:3,name:"王绣绣",avatar:"https://cdn.uviewui.com/uview/album/3.jpg",showAdd:!0},{id:4,name:"赵芸芸",avatar:"https://cdn.uviewui.com/uview/album/4.jpg",showAdd:!0},{id:5,name:"张小小",avatar:"https://cdn.uviewui.com/uview/album/5.jpg",showAdd:!0},{id:6,name:"李柳柳",avatar:"https://cdn.uviewui.com/uview/album/6.jpg",showAdd:!0},{id:7,name:"王绣绣",avatar:"https://cdn.uviewui.com/uview/album/7.jpg",showAdd:!0},{id:8,name:"赵芸芸",avatar:"https://cdn.uviewui.com/uview/album/8.jpg",showAdd:!0}]),m=E([{id:1,title:"刺绣技术文化讨论",tag:"刺绣达人",count:"36585456",avatars:["https://cdn.uviewui.com/uview/album/1.jpg","https://cdn.uviewui.com/uview/album/2.jpg"]},{id:2,title:"刺绣技法百科全书",tag:"刺绣技法",count:"36585456",avatars:["https://cdn.uviewui.com/uview/album/3.jpg","https://cdn.uviewui.com/uview/album/4.jpg"]},{id:3,title:"刺绣工艺",tag:"刺绣技法",count:"36598455",avatars:["https://cdn.uviewui.com/uview/album/5.jpg","https://cdn.uviewui.com/uview/album/6.jpg"]},{id:4,title:"刺绣现状",tag:"刺绣技法",count:"36561566",avatars:["https://cdn.uviewui.com/uview/album/7.jpg","https://cdn.uviewui.com/uview/album/8.jpg"]}]),p=E(!1),w=E([]),b=E("loadmore"),h=E("flower");let S=1,O=!0,R=!1;const V=async(e=!1)=>{if(e){if(R)return;p.value=!0,S=1,O=!0}if(O&&!R){R=!0,b.value="loading";try{await new Promise((e=>setTimeout(e,1800)));const l=(t=S,a=5,Array.from({length:a},((e,l)=>({id:(t-1)*a+l+1,name:"绣娘乐乐",avatar:"https://cdn.uviewui.com/uview/album/5.jpg",isSigned:!0,location:"广州市",time:l%2==0?"刚刚发布":"2025.1.2",content:"这种失传很久的技法现在找回了，在这里分享给各位绣娘。",images:["https://cdn.uviewui.com/uview/album/6.jpg","https://cdn.uviewui.com/uview/album/7.jpg","https://cdn.uviewui.com/uview/album/8.jpg","https://cdn.uviewui.com/uview/album/9.jpg","https://cdn.uviewui.com/uview/album/10.jpg"],views:"10W+",likes:536,comments:536,shares:536,isFollowed:l%2!=0,isLiked:!1}))));l.length<5?(O=!1,b.value="nomore"):b.value="loadmore",w.value=e?l:[...w.value,...l],S++}catch(l){e||(b.value="loadmore"),console.error("加载失败:",l)}finally{R=!1,p.value=!1}var t,a}},$=e=>{0===e.id?console.log("更多绣娘"):console.log("点击绣娘",e.name)},N=e=>{console.log("点击群组",e.title)},P=e=>{console.log("点击动态",e.id)},G=e=>{e.isFollowed=!e.isFollowed,A({title:e.isFollowed?"已关注":"已取消关注",icon:"none"})},H=e=>{e.isLiked=!e.isLiked,e.likes+=e.isLiked?1:-1},J=e=>{console.log("评论",e.id)},U=e=>{console.log("转发",e.id)},W=function(e,t=500){let a=null;return function(...l){a&&clearTimeout(a),a=setTimeout((()=>{e.apply(this,l)}),t)}}((()=>{u.value&&(console.log("搜索关键字",u.value),V(!0))}),1200);_(u,(e=>{W()}));const Z=()=>{V(!0)},q=()=>{V()};return x((()=>{V(!0)})),(e,E)=>{const _=t(l("LayoutNavigation"),B),x=t(l("CxSearch"),D),A=g,S=t(l("CxScrollView"),L),O=t(l("BaseProductList"),I),R=t(l("u-icon"),a),V=F,W=j;return o(),i(A,{class:"page-wrap community"},{default:s((()=>[r(_,{title:k(n)},null,8,["title"]),r(A,{class:"search-bar"},{default:s((()=>[r(x,{modelValue:k(u),"onUpdate:modelValue":E[0]||(E[0]=e=>y(u)?u.value=e:u=e)},null,8,["modelValue"])])),_:1}),r(A,{class:"page-content"},{default:s((()=>[r(O,{onOnScrollToLower:q,onOnRefresh:Z,isRefreshing:p.value,loadStatus:b.value,iconType:h.value,enableRefresh:!1,enableLoadMore:!0,class:"scroll-view"},{scrollContain:s((()=>[r(A,{class:"mother-section"},{default:s((()=>[r(S,{class:"mother-list",list:d.value,config:{direction:"x",visibleCount:4.5,gap:"20rpx"}},{item:s((({item:e})=>[r(z,{item:e,onClick:$},null,8,["item"])])),_:1},8,["list"])])),_:1}),r(A,{class:"group-section"},{default:s((()=>[r(S,{class:"group-list",list:m.value,config:{direction:"x",visibleCount:1.8,gap:"20rpx"}},{item:s((({item:e})=>[r(T,{item:e,onClick:N},null,8,["item"])])),_:1},8,["list"])])),_:1}),r(A,{class:"dynamic-list"},{default:s((()=>[(o(!0),v(C,null,f(w.value,((e,t)=>(o(),i(M,{key:t,item:e,onClick:P,onFollow:G,onLike:H,onComment:J,onShare:U},null,8,["item"])))),128))])),_:1})])),_:1},8,["isRefreshing","loadStatus","iconType"])])),_:1}),r(A,{class:"float-btn"},{default:s((()=>[r(W,{url:"/pages/gz/community/released"},{default:s((()=>[r(R,{name:"plus",color:"#fff",bold:"",size:"32rpx"}),r(V,{class:"btn-text"},{default:s((()=>[c("发布")])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ba462488"]]);export{O as default};
