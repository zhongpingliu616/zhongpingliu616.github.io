import{_ as a,r as e,c as t,d as s,a2 as l,C as o,D as n,a as i,g as c,j as r,f as u,u as d,H as f,F as p,aT as m,J as _,ae as b,a7 as x,m as v,aD as y,E as g,aU as k,o as h,k as w,b as C,h as F,aV as z,an as j,A as S,p as T,t as D}from"./index-CFeN5XM9.js";import{_ as U}from"./Navigation.B6I6j3Nc.js";import{_ as B}from"./CxComfirmBtn.BA1OBJ6W.js";import{_ as N,a as W}from"./payment-confirm.Bs6pECbF.js";import{_ as A}from"./uni-icons.CBW_QvPB.js";const E=a({__name:"deposit",setup(a){let E=e("压金"),H=e(!1),I=e(!1),J=e(!1),L=null,P=e([]),R=e({}),V=e(0),Y=e(["压金单独支付，包含违约保证金和退货压金两个部分；","压金以5000元为固定额度；","压金以5000元起步，每季度根据上季度月平均商家好店整体营业额调整，只升不降；","压金额度不满时，需在10个自然日内补齐"]);const $=e({deposit:0,label:"(1000 - 6000)￥"}),q=t((()=>{var a;return(null==(a=$.value)?void 0:a.deposit)>0})),G=async()=>{J.value=!0},K=async()=>{J.value=!1,I.value=!0;const{code:a,msg:e,data:t={}}=await z({address_id:R.value.id,order_id:$.value.order_id});return 200==a?(_({title:"缴纳压金成功",icon:"success"}),void setTimeout((()=>{b()}),1500)):100028==a?(_({title:e||"余额不足，请先充值",icon:"none"}),void setTimeout((()=>{b()}),1500)):(_({title:e||"缴纳压金失败",icon:"none"}),void setTimeout((()=>{b()}),1500))},M=()=>{J.value=!0},O=async()=>{const{code:a,msg:e,data:t={}}=await m({id:L});if(200==a)return _({title:"缴纳压金成功",icon:"success"}),$.value=t.lists||{},void(async()=>{const{code:a,msg:e,data:t={}}=await j();200==a?P.value=t.lists||[]:_({title:e||"地址加载失败",icon:"none"})})();_({title:e||"缴纳压金失败",icon:"none"}),setTimeout((()=>{b()}),1500)};return s((async()=>{O()})),l((a=>{a.id&&(L=a.id)})),(a,e)=>{const t=o(n("LayoutNavigation"),U),s=S,l=o(n("u-cell"),x),m=v,_=o(n("u-text"),y),b=o(n("CxComfirmBtn"),B),z=T,j=i("up-text"),L=o(n("CxPopup"),N),O=o(n("u-icon"),g),Q=o(n("uni-icons"),A),X=o(n("u-popup"),k);return h(),c(p,null,[r(m,{class:"page-wrap pay-deposit"},{default:u((()=>[r(t,{title:d(E)},null,8,["title"]),r(m,{class:"page-content"},{default:u((()=>[r(m,{class:"sys-block-result"},{default:u((()=>[r(s,{class:"sys-result-title"},{default:u((()=>[w("需要缴纳压金")])),_:1}),r(m,{class:"form-container"},{default:u((()=>[(h(),C(l,{key:a.index,border:!1,class:"form-item",title:`￥ ${d($).deposit}`,value:d($).label,"title-style":{fontSize:"32rpx",fontWeight:"bold",color:"#333"},"value-style":{fontSize:"30rpx",color:"#666"}},null,8,["title","value"]))])),_:1})])),_:1}),r(m,{class:"guarantee-card"},{default:u((()=>[r(_,{text:"保证金说明",color:"#FFFFFF",size:"30rpx",class:"title"}),r(m,{class:"content"},{default:u((()=>[(h(!0),c(p,null,F(d(Y),((a,e)=>(h(),C(m,{class:"item",key:e},{default:u((()=>[r(s,{class:"number"},{default:u((()=>[w(D(e+1)+"、",1)])),_:2},1024),r(s,{class:"text"},{default:u((()=>[w(D(a),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),r(m,{class:"confirm-btn-wrap"},{default:u((()=>[r(b,{text:"立即缴纳",disabled:!d(q),onClick:M},null,8,["disabled"])])),_:1})])),_:1}),r(m,{class:"cx-popup"},{default:u((()=>[r(L,{show:d(H),"onUpdate:show":e[0]||(e[0]=a=>f(H)?H.value=a:H=a)},{popupContent:u((a=>[r(m,{class:"payment-confirm-wrap"},{default:u((()=>[r(z,{class:"payment-icon",mode:"aspectFill",src:W}),r(j,{size:"34rpx",bold:"",align:"center",text:"我已知晓"}),r(j,{align:"center",color:"#999",text:"缴纳前请仔细阅读保证金说明"})])),_:1}),r(m,{class:"enter-wrap"},{default:u((()=>[r(b,{text:"确认缴费",loading:d(I),onClick:G},null,8,["loading"])])),_:1})])),_:1},8,["show"])])),_:1})])),_:1}),r(X,{show:d(J),"onUpdate:show":e[2]||(e[2]=a=>f(J)?J.value=a:J=a),mode:"bottom","border-radius":20,closeable:"","close-icon-pos":"top-right","mask-close-able":!0,"safe-area-inset-bottom":!0,"z-index":9999,"custom-style":{width:"100%",maxWidth:"100%",background:"#7a1e28"}},{default:u((()=>[r(m,{class:"payment-list-warpper"},{default:u((()=>[r(m,{class:"title"},{default:u((()=>[w("请选择您的收货地址")])),_:1}),r(m,{class:"payment-list"},{default:u((()=>[(h(!0),c(p,null,F(d(P),((a,e)=>(h(),C(m,{key:e,class:"method-item",onClick:t=>((a,e)=>{V.value=e,R.value=a})(a,e)},{default:u((()=>[r(m,{class:"left"},{default:u((()=>[r(s,null,{default:u((()=>[w(D(a.contact_person)+" "+D(a.contact_phone)+" "+D(a.detail_address),1)])),_:2},1024)])),_:2},1024),d(V)===e?(h(),C(O,{key:0,name:"checkmark-circle-fill",color:"#FF4D4F",size:"30rpx"})):(h(),C(Q,{key:1,type:"circle",color:"#ccc",size:"30"}))])),_:2},1032,["onClick"])))),128))])),_:1}),r(m,{class:"btn-group"},{default:u((()=>[r(b,{text:"取消",onClick:e[1]||(e[1]=a=>f(J)?J.value=!1:J=!1),btnStyle:{flex:1,marginRight:"10px",background:"transparent",border:"2px solid #fff",color:"#fff"}}),r(b,{text:"确定",onClick:K,btnStyle:{flex:1,background:"linear-gradient(90deg, #ff6b6b, #ff9c6b)",color:"#fff"}},null,8,["btnStyle"])])),_:1})])),_:1})])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-30b36ef8"]]);export{E as default};
