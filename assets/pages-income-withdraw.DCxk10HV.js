import{_ as a,r as e,c as l,d as t,x as o,y as s,a as n,b as c,f as u,a9 as i,D as d,m as r,Z as m,al as f,am as p,o as _,j as v,k as h,t as x,g,h as b,F as y,an as C,ao as w,ap as F,aq as k,C as V,E as I,l as z,J as U}from"./index-E36eYFUz.js";import{_ as j}from"./Navigation.fXnM5b3z.js";import{_ as N}from"./CxIconFont.D1tnD14h.js";import{_ as S}from"./CxComfirmBtn.D_Y-qTM9.js";const $=a({__name:"withdraw",setup(a){const{proxy:$}=U(),B=e(""),A=e(0),D=e([]),E=l((()=>{if(!B.value)return!0;const a=parseFloat(B.value);return isNaN(a)||a<1||a>($.$globalUserInfo.amount||0)})),L=()=>{B.value=($.$globalUserInfo.amount||0).toString()},q=async()=>{var a;if(B.value)if(parseFloat(B.value)<1)d({title:"提现金额不得少于1元",icon:"none"});else if(null==(a=D.value[A.value])?void 0:a.id){C({title:"提交中..."});try{const a=await w({amount:B.value,user_bank_id:D.value[A.value].id});F(),200===a.code?(d({title:"申请提交成功",icon:"success"}),B.value="",setTimeout((()=>{k()}),1500)):d({title:a.msg||"提现申请提交失败",icon:"none"})}catch(e){F(),d({title:"网络异常",icon:"none"})}}else d({title:"请选择提现方式",icon:"none"});else d({title:"请输入提现金额",icon:"none"})},J=()=>{V({url:"/pages-xn/income/withdrawal-record"})};return t((()=>{(async()=>{const{code:a=9999,data:e,msg:l}=await i();200===a?(null==e?void 0:e.lists.length)>0&&e.lists.forEach((a=>{let e="",l="";1==a.type?(e="&#xe607;",l="#07c160"):2==a.type?(e="&#xe60a;",l="#1677FF"):3==a.type&&(e="&#xe63f;",l="#FFA937"),D.value.push({...a,name:a.account_name,account:a.account_no||"",icon:e,color:l})})):d({title:l||"支付方式加载失败",icon:"none"})})()})),(a,e)=>{const l=o(s("LayoutNavigation"),j),t=I,i=r,d=n("up-count-to"),C=o(s("u-input"),m),w=o(s("CxIconFont"),N),F=o(s("u-radio"),f),k=o(s("u-radio-group"),p),V=o(s("CxComfirmBtn"),S);return _(),c(i,{class:"page-wrap withdraw"},{default:u((()=>[v(l,{title:"余额提现"}),v(i,{class:"page-content"},{default:u((()=>[v(i,{class:"balance-card"},{default:u((()=>[v(i,{class:"card-header"},{default:u((()=>[v(t,{class:"label"},{default:u((()=>[h("可提现额度 (元)")])),_:1})])),_:1}),v(i,{class:"card-body"},{default:u((()=>[v(i,{class:"amount"},{default:u((()=>[v(d,{endVal:a.$globalUserInfo.amount,color:"#fff",separator:",",fontSize:"72rpx"},null,8,["endVal"])])),_:1}),v(i,{class:"record-btn",onClick:J},{default:u((()=>[v(t,null,{default:u((()=>[h("提现记录")])),_:1})])),_:1})])),_:1})])),_:1}),v(i,{class:"section-card amount-section"},{default:u((()=>[v(t,{class:"section-title"},{default:u((()=>[h("提现金额")])),_:1}),v(i,{class:"input-wrap"},{default:u((()=>[v(t,{class:"currency"},{default:u((()=>[h("¥")])),_:1}),v(C,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=a=>B.value=a),type:"number",placeholder:"请输入提现金额",border:"none","custom-style":{fontSize:"40rpx",fontWeight:"bold"}},null,8,["modelValue"]),v(t,{class:"withdraw-all",onClick:L},{default:u((()=>[h("全部提现")])),_:1})])),_:1}),v(t,{class:"tip"},{default:u((()=>{return[h("可提现金额 ¥"+x((e=a.$globalUserInfo.amount,(e||0).toLocaleString("zh-CN",{minimumFractionDigits:2})))+"，每次提现不得少于1元",1)];var e})),_:1})])),_:1}),v(i,{class:"section-card method-section"},{default:u((()=>[v(t,{class:"section-title"},{default:u((()=>[h("提现方式")])),_:1}),v(k,{modelValue:A.value,"onUpdate:modelValue":e[1]||(e[1]=a=>A.value=a),placement:"column"},{default:u((()=>[(_(!0),g(y,null,b(D.value,((a,e)=>(_(),c(i,{class:"method-item",key:e,onClick:a=>A.value=e},{default:u((()=>[v(i,{class:"method-left"},{default:u((()=>[v(w,{code:a.icon,size:"40rpx",color:a.color,class:"method-icon"},null,8,["code","color"]),v(t,{class:"method-name"},{default:u((()=>[h(x(a.name),1)])),_:2},1024),a.account?(_(),c(t,{key:0,class:"method-account"},{default:u((()=>[h(x(a.account),1)])),_:2},1024)):z("",!0)])),_:2},1024),v(F,{name:e,"active-color":"#FF6B00",iconSize:"30rpx",size:"30rpx"},null,8,["name"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),v(i,{class:"footer-btn"},{default:u((()=>[v(V,{text:"立即提现",disabled:E.value,onClick:q},null,8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-267c51dd"]]);export{$ as default};
