import{_ as t,c as e,o as a,b as s,f as l,j as o,k as i,t as n,U as r,u,g as d,F as c,h as m,l as p,a1 as g,E as _,m as f,p as v,r as h,d as b,w as y,x as A,aH as k,y as C,C as x,a$ as I,D as M,ai as F,B as T,aU as w,aV as N}from"./index-E36eYFUz.js";import{_ as j}from"./Navigation.fXnM5b3z.js";import{_ as $}from"./CxTabs.BRUHryh_.js";import{_ as S}from"./ProductList.aAvT4MfD.js";import{_ as D}from"./CxModal.B62FgOA2.js";import"./CxComfirmBtn.D_Y-qTM9.js";const B=t({__name:"BuyerOrderCard",props:{item:{type:Object,default:()=>({})}},emits:["action","click"],setup(t,{emit:h}){const b=t,y=h,A=e((()=>b.item.goods_list&&Array.isArray(b.item.goods_list)&&b.item.goods_list.length>0?b.item.goods_list:[{image:b.item.image,title:b.item.name||b.item.title,price:b.item.price||b.item.amount,num:b.item.num||b.item.count||1,tags:b.item.tags||[]}])),k=e((()=>b.item.total_amount?b.item.total_amount:A.value.reduce(((t,e)=>t+parseFloat(e.price||e.amount||0)*parseInt(e.num||e.count||1)),0).toFixed(2))),C={10:{text:"待付款",class:"status-wait-pay"},20:{text:"待发货",class:"status-wait-ship"},50:{text:"已发货",class:"status-received"},70:{text:"已完成",class:"status-completed"},90:{text:"退款售后",class:"status-refund"},0:{text:"已取消",class:"status-cancelled"}},x=e((()=>{var t;return(null==(t=C[b.item.status])?void 0:t.text)||"未知状态"})),I=e((()=>{var t;return(null==(t=C[b.item.status])?void 0:t.class)||""})),M=e((()=>[10,20,50,70,90].includes(b.item.status))),F=t=>{y("action",{type:t,item:b.item})},T=()=>{y("click",b.item)};return(e,h)=>{const b=_,y=f,C=v;return a(),s(y,{class:"order-card-item",onClick:T},{default:l((()=>[o(y,{class:"card-top-row"},{default:l((()=>[o(b,{class:"order-time"},{default:l((()=>[i("下单时间: "+n(t.item.create_time),1)])),_:1}),o(y,{class:r(["status-tag",u(I)])},{default:l((()=>[o(b,null,{default:l((()=>[i(n(u(x)),1)])),_:1})])),_:1},8,["class"])])),_:1}),o(y,{class:"goods-list"},{default:l((()=>[(a(!0),d(c,null,m(u(A),((e,r)=>(a(),s(y,{class:"card-content-row",key:r},{default:l((()=>[o(C,{src:e.image,class:"product-image",mode:"aspectFill"},null,8,["src"]),o(y,{class:"product-info"},{default:l((()=>[o(y,{class:"product-title"},{default:l((()=>[i(n(e.title||e.name),1)])),_:2},1024),o(y,{class:"product-tags"},{default:l((()=>[(a(!0),d(c,null,m(e.tags||[],((t,e)=>(a(),s(y,{class:"tag-item",key:e},{default:l((()=>[o(b,null,{default:l((()=>[i(n(t),1)])),_:2},1024)])),_:2},1024)))),128)),e.tags&&0!==e.tags.length?p("",!0):(a(),s(y,{key:0,class:"tag-item"},{default:l((()=>[o(b,null,{default:l((()=>[i(n("nft"===t.item.type?"NFT藏品":"实物藏品"),1)])),_:1})])),_:1}))])),_:2},1024),o(y,{class:"price-row"},{default:l((()=>[o(b,{class:"price-symbol"},{default:l((()=>[i("¥ ")])),_:1}),o(b,{class:"price-num"},{default:l((()=>[i(n(e.price||e.amount),1)])),_:2},1024),o(y,{class:"count-num"},{default:l((()=>[i("x"+n(e.num||e.count||1),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),o(y,{class:"order-no-row"},{default:l((()=>[o(b,null,{default:l((()=>[i("订单号: "+n(t.item.order_id),1)])),_:1})])),_:1}),o(y,{class:"card-footer"},{default:l((()=>[o(y,{class:"total-row"},{default:l((()=>[o(b,null,{default:l((()=>[i("合计: ")])),_:1}),o(b,{class:"total-price"},{default:l((()=>[i("¥ "+n(u(k)),1)])),_:1})])),_:1}),u(M)?(a(),s(y,{key:0,class:"action-buttons"},{default:l((()=>[10===t.item.status?(a(),d(c,{key:0},[o(y,{class:"btn btn-outline",onClick:h[0]||(h[0]=g((t=>F("cancel")),["stop"]))},{default:l((()=>[i("取消订单")])),_:1}),o(y,{class:"btn btn-primary",onClick:h[1]||(h[1]=g((t=>F("pay")),["stop"]))},{default:l((()=>[i("立即支付")])),_:1})],64)):20===t.item.status?(a(),d(c,{key:1},[o(y,{class:"btn btn-outline",onClick:h[2]||(h[2]=g((t=>F("refund")),["stop"]))},{default:l((()=>[i("申请退款")])),_:1}),o(y,{class:"btn btn-primary",onClick:h[3]||(h[3]=g((t=>F("remind")),["stop"]))},{default:l((()=>[i("提醒发货")])),_:1})],64)):50===t.item.status?(a(),d(c,{key:2},[o(y,{class:"btn btn-outline",onClick:h[4]||(h[4]=g((t=>F("aftersales")),["stop"]))},{default:l((()=>[i("申请售后")])),_:1}),o(y,{class:"btn btn-primary",onClick:h[5]||(h[5]=g((t=>F("confirm")),["stop"]))},{default:l((()=>[i("确认收货")])),_:1})],64)):70===t.item.status?(a(),d(c,{key:3},[o(y,{class:"btn btn-outline",onClick:h[6]||(h[6]=g((t=>F("delete")),["stop"]))},{default:l((()=>[i("删除订单")])),_:1}),o(y,{class:"btn btn-primary",onClick:h[7]||(h[7]=g((t=>F("buy_again")),["stop"]))},{default:l((()=>[i("再买一单")])),_:1})],64)):90===t.item.status?(a(),d(c,{key:4},[o(y,{class:"btn btn-outline",onClick:h[8]||(h[8]=g((t=>F("delete")),["stop"]))},{default:l((()=>[i("删除订单")])),_:1}),o(y,{class:"btn btn-primary",onClick:h[9]||(h[9]=g((t=>F("buy_again")),["stop"]))},{default:l((()=>[i("再买一单")])),_:1})],64)):p("",!0)])),_:1})):p("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-3bbcae14"]]),V=t({__name:"NftOrderCard",props:{item:{type:Object,default:()=>({})}},setup(t){const u=t,d=e((()=>u.item.goods_list&&u.item.goods_list[0]?u.item.goods_list[0]:{})),c=e((()=>{switch(u.item.status){case"buy":return"ribbon-buy";case"sell":return"ribbon-sell";case"revoked":return"ribbon-revoked";default:return""}})),m=e((()=>{switch(u.item.status){case"buy":return"买入";case"sell":return"卖出";case"revoked":return"撤销";default:return""}}));return(e,u)=>{const p=_,g=f,h=v;return a(),s(g,{class:"nft-order-card"},{default:l((()=>[o(g,{class:r(["status-ribbon",c.value])},{default:l((()=>[o(p,{class:"ribbon-text"},{default:l((()=>[i(n(m.value),1)])),_:1})])),_:1},8,["class"]),o(g,{class:"card-content"},{default:l((()=>[o(h,{src:d.value.image,class:"goods-image",mode:"aspectFill"},null,8,["src"]),o(g,{class:"goods-info"},{default:l((()=>[o(g,{class:"goods-title"},{default:l((()=>[i(n(d.value.title),1)])),_:1}),o(g,{class:"goods-meta"},{default:l((()=>[o(g,{class:"nft-tag"},{default:l((()=>[i("NFT藏品")])),_:1}),o(p,{class:"goods-id"},{default:l((()=>[i("ID: "+n(t.item.order_id),1)])),_:1})])),_:1}),o(g,{class:"goods-bottom"},{default:l((()=>[o(p,{class:"price"},{default:l((()=>[i("¥ "+n(d.value.price),1)])),_:1}),o(p,{class:"count"},{default:l((()=>[i("x "+n(d.value.num),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-42337e05"]]),U=t({__name:"OrderTabPane",props:{type:{type:Number,required:!0},status:{type:[Number,String,null],default:null},mockData:{type:Array,default:()=>[]},isActive:{type:Boolean,default:!1}},setup(t){const e=t,i=h([]),n=h(!1),r=h(!1),g=h(1);h(10);const _=h("loadmore"),v=h(!1),F=h(!1),T=h(!1),w=h(null),N=async(t=!1)=>{t?(g.value=1,r.value=!0,_.value="loading"):n.value=!0,setTimeout((()=>{let a=JSON.parse(JSON.stringify(e.mockData));const s=Number(e.type);0===s?a=a.filter((t=>"string"==typeof t.status||t.goods_list.some((t=>t.tags&&t.tags.includes("NFT藏品"))))):1===s&&(a=a.filter((t=>t.goods_list.some((t=>t.tags&&t.tags.includes("实物藏品")))))),null!==e.status&&(a=a.filter((t=>t.status===e.status))),t&&(i.value=a),r.value=!1,n.value=!1,_.value="nomore",v.value=!0}),500)},j=()=>{N(!0)},$=()=>{"loadmore"===_.value&&N()},U=t=>{const{type:e,item:a}=t;if("refund"!==e){if("pay"!==e)return"cancel"===e?(w.value=a,void(F.value=!0)):"confirm"===e?(w.value=a,void(T.value=!0)):void("aftersales"!==e?"logistics"!==e?I("order-action",{type:e,item:a}):O(a):x({url:"/pages/my/customer-service"}));x({url:`/pages-gz/grab-order/confirm-order?id=${a.id}`})}else x({url:`/pages-gz/grab-order/refund-apply?id=${a.id}`})},L=()=>{F.value=!1,M({title:"订单已取消",icon:"none"}),N(!0)},z=()=>{T.value=!1,M({title:"确认收货成功",icon:"success"}),N(!0)},O=t=>{let e="";e=t.goods_list&&t.goods_list[0]&&t.goods_list[0].tags&&t.goods_list[0].tags.includes("实物藏品")?`/pages-gz/grab-order/detail?id=${t.id}&status=${t.status}`:`/pages-gz/collectibles/payment-order-detail?id=${t.id}&status=${90===t.status?"fail":"success"}`,x({url:e,success:e=>{e.eventChannel.emit("sendOrderDatas",{orderInfo:t,source:"buyer"})}})};return b((()=>{e.isActive&&N(!0)})),y((()=>e.isActive),(t=>{t&&!v.value&&N(!0)})),y((()=>e.type),(()=>{e.isActive?N(!0):v.value=!1})),(e,g)=>{const v=A(C("u-empty"),k),h=f,b=A(C("BaseProductList"),S),y=A(C("CxModal"),D);return a(),s(h,{class:"tab-pane",style:{height:"100%"}},{default:l((()=>[o(b,{ref:"listRef",isRefreshing:u(r),loadStatus:u(_),enableRefresh:!0,enableLoadMore:!0,onOnRefresh:j,onOnScrollToLower:$},{scrollContain:l((()=>[o(h,{class:"list-content"},{default:l((()=>[0===t.type?(a(!0),d(c,{key:0},m(u(i),((t,e)=>(a(),s(V,{key:t.id||e,item:t,onClick:O},null,8,["item"])))),128)):(a(!0),d(c,{key:1},m(u(i),((t,e)=>(a(),s(B,{key:t.id||e,item:t,onAction:U,onClick:O},null,8,["item"])))),128)),0!==u(i).length||u(n)||u(r)?p("",!0):(a(),s(v,{key:2,text:"暂无订单",textColor:"#999",iconColor:"#ccc",mode:"order","margin-top":"100"}))])),_:1})])),_:1},8,["isRefreshing","loadStatus"]),o(y,{show:u(F),"onUpdate:show":g[0]||(g[0]=t=>F.value=t),title:"取消订单",content:"取消后订单将无法发货，确定取消？",onConfirm:L,onCancel:g[1]||(g[1]=t=>F.value=!1)},null,8,["show"]),o(y,{show:u(T),"onUpdate:show":g[2]||(g[2]=t=>T.value=t),title:"确认收货",content:"确认已收到商品？",onConfirm:z,onCancel:g[3]||(g[3]=t=>T.value=!1)},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-53451154"]]),L=t({__name:"orders",setup(t){h("我的订单");const e=h(0),i=h(0);let n=h(110);const r=[{name:"NFT藏品"},{name:"实物藏品"}],p=[{name:"全部",value:null},{name:"待付款",value:10},{name:"待发货",value:20},{name:"已收货",value:50},{name:"退款售后",value:90}],g=[{name:"全部",value:null},{name:"买入",value:"buy"},{name:"卖出",value:"sell"},{name:"已撤销",value:"revoked"}],_=h(g),v=[{id:101,order_id:"234515665132",create_time:"2025-01-01 10:00:00",status:"buy",goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"古韵民族丝绸非遗刺绣",tags:["NFT藏品"],price:10,num:1}]},{id:102,order_id:"234515665132",create_time:"2025-01-02 10:00:00",status:"sell",goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"古韵民族丝绸非遗刺绣",tags:["NFT藏品"],price:10,num:1}]},{id:103,order_id:"234515665132",create_time:"2025-01-03 10:00:00",status:"revoked",goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"古韵民族丝绸非遗刺绣",tags:["NFT藏品"],price:10,num:1}]},{id:1,order_id:"202501010001",create_time:"2025-01-01 10:00:00",status:10,total_amount:376,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"古第 民族纹绣非遗刺绣 (待付款)",tags:["NFT藏品","限量999份"],price:188,num:1},{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"云色·凤凰刺绣",tags:["NFT藏品"],price:188,num:1}]},{id:2,order_id:"202501020002",create_time:"2025-01-02 11:30:00",status:20,total_amount:376,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"云色·凤凰刺绣 (待发货)",tags:["NFT藏品"],price:188,num:2}]},{id:3,order_id:"202501030003",create_time:"2025-01-03 14:15:00",status:50,total_amount:564,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"苗族银饰挂件 (待收货)",tags:["实物藏品","纯银"],price:282,num:1},{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"手工刺绣荷包",tags:["实物藏品"],price:141,num:2}]},{id:7,order_id:"202501030003",create_time:"2025-01-03 14:15:00",status:20,total_amount:564,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"苏绣团扇 (待发货)",tags:["实物藏品"],price:299,num:1}]},{id:4,order_id:"202501040004",create_time:"2025-01-04 09:20:00",status:70,total_amount:199,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"非遗蜡染围巾 (已完成)",tags:["实物藏品","手工"],price:199,num:1}]},{id:5,order_id:"202501050005",create_time:"2025-01-05 16:45:00",status:90,total_amount:299,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"苏绣团扇 (售后中)",tags:["实物藏品"],price:299,num:1}]},{id:6,order_id:"202501060006",create_time:"2025-01-06 08:00:00",status:10,goods_list:[{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"非遗苗绣挂画 A款",tags:["实物藏品"],price:500,num:1},{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"非遗苗绣挂画 B款",tags:["实物藏品"],price:500,num:1},{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"非遗苗绣挂画 C款",tags:["实物藏品"],price:500,num:1},{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"非遗苗绣挂画 D款",tags:["实物藏品"],price:500,num:1},{image:`https://picsum.photos/50/50?random=${parseInt(1e3*Math.random())}`,title:"非遗苗绣挂画 E款",tags:["实物藏品"],price:500,num:1}]}];F((t=>{if(void 0!==t.type){const a=parseInt(t.type);if(!isNaN(a)&&(0===a||1===a)&&(b({index:a}),void 0!==t.status)){const a=parseInt(t.status),s=_.value.findIndex((t=>t.value===a));-1!==s&&(e.value=s)}}}));const b=t=>{i.value=t.index,e.value=0,n.value=110,0===i.value?_.value=g:_.value=p},y=t=>{const a="object"==typeof t?t.index:t;e.value=a,n.value=t.e.rect.width};return(t,p)=>{const g=f,h=A(C("LayoutNavigation"),j),k=A(C("CxTabs"),$);return a(),s(g,{class:"page-wrap orders"},{default:l((()=>[o(h,{type:"gz",title:"我的订单"},{right:l((()=>[o(g,{class:"nav-icons"})])),_:1}),o(g,{class:"page-content"},{default:l((()=>[o(g,{class:"type-tabs-container"},{default:l((()=>[o(k,{modelValue:u(i),"onUpdate:modelValue":p[0]||(p[0]=t=>T(i)?i.value=t:null),tabItems:r,scrollable:!1,lineHeight:"5",lineWidth:"56rpx",itemStyle:{padding:"2rpx 25rpx"},activeStyle:{color:"#fff"},lineBg:"rgba(255, 255, 255, 0.6)",onChangeTab:b},null,8,["modelValue","lineBg"])])),_:1}),o(g,{class:"status-tabs-container"},{default:l((()=>[o(k,{modelValue:u(e),"onUpdate:modelValue":p[1]||(p[1]=t=>T(e)?e.value=t:null),tabItems:u(_),scrollable:!1,lineHeight:"90%",lineWidth:u(n)+"rpx",itemStyle:{padding:"2rpx 25rpx"},inactiveStyle:{fontSize:"24rpx"},activeStyle:{fontSize:"22rpx",color:"#fff"},lineBg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAICAMAAACMAFxIAAAAzFBMVEUAAAD4KBv/gFf5eVn4Kxz4LB35LB38elf8fVj8fVr7elj4Kx38fFn8elf8fVn4Khz4LR78elf8fVn4LR74Kx34LB74LR74Lh/4MCD4MSH4MiL4NCP5NST5Nyb5OSf5Oij5PCn5Piv5QCz5Qi75RC/5RjD5SDL5SjP6TDX6Tjb6UDj6Ujr6VDv6Vj36WD76WkD6XEH6XkP7YET7Ykb7ZEf7Zkn7aEr7akv7bE37bk77b0/7cVH7c1L8dFP8dlT8d1X8eFb8elf8e1j8fFlwxwMgAAAAFHRSTlMAJiYora2tra2tru7u8fHz8/Pz9A5jUGUAAABISURBVBgZlcFBDoAgDATAbW00QnyP/z9qvPAYawhU/QI7IxDLi4wq3kMkJWGcrtMKyj5rBikpWF1vkJrGA8pR7fO2GUZdUd8fzbgT1C1Y/jMAAAAASUVORK5CYII=",onChangeTab:y},null,8,["modelValue","tabItems","lineWidth"])])),_:1}),o(g,{class:"list-container"},{default:l((()=>[(a(!0),d(c,null,m(u(_),((t,n)=>w((a(),s(g,{key:null!==t.value?t.value:"all",style:{height:"100%"}},{default:l((()=>[o(U,{type:u(i),status:t.value,mockData:v,isActive:u(e)===n},null,8,["type","status","isActive"])])),_:2},1536)),[[N,u(e)===n]]))),128))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-178f959f"]]);export{L as default};
