import{_ as a,r as s,ai as t,x as e,y as l,b as o,f as c,D as u,m as n,z as i,o as r,j as d,u as f,k as _,t as m,l as v,g,h as p,F as b,C as x,E as y,B as h,ad as k,p as w}from"./index-E36eYFUz.js";import{_ as C}from"./Navigation.fXnM5b3z.js";import{_ as j}from"./uni-icons.DKvk8G6K.js";import{_ as L}from"./ProductList.aAvT4MfD.js";import{_ as z}from"./CxComfirmBtn.D_Y-qTM9.js";import{k as B,l as R}from"./xn.B6pvNNd_.js";const S=a({__name:"my-team",setup(a){const h=s("我的团队"),k=s(""),S=s(1),F=s(10),N=s("loadmore"),O=s(!1),P=s({}),q=s([]),A=()=>{x({url:"/pages-xn/my/promotion-revenue"})},D=()=>{x({url:"/pages-xn/my/promotion-code"})},E=async()=>{const a=await B();200===a.code&&(P.value=a.data||{})},I=async(a=!1)=>{a&&(S.value=1,N.value="loading",O.value=!0);const s=await R({keyword:k.value,page:S.value,limit:F.value});if(O.value=!1,200===s.code){const t=s.data.lists||[];q.value=a?t:[...q.value,...t],t.length<F.value?N.value="nomore":(N.value="loadmore",S.value++)}else N.value="nomore",u({title:s.msg||"获取数据失败",icon:"none"})},M=()=>{I(!0),E()},T=()=>{"nomore"!==N.value&&I()};return t((async()=>{E(),I(!0)})),(a,s)=>{const t=e(l("LayoutNavigation"),C),u=n,x=e(l("uni-icons"),j),k=y,B=e(l("u-icon"),i),R=w,S=e(l("BaseProductList"),L),F=e(l("CxComfirmBtn"),z);return r(),o(u,{class:"page-wrap my-team"},{default:c((()=>[d(t,{title:f(h)},null,8,["title"]),d(u,{class:"page-content"},{default:c((()=>[d(u,{class:"stats-grid"},{default:c((()=>[d(u,{class:"stats-row"},{default:c((()=>[d(u,{class:"stats-item"},{default:c((()=>[d(u,{class:"stats-value"},{default:c((()=>[_(m(f(P).count||0),1)])),_:1}),d(u,{class:"stats-label"},{default:c((()=>[_("累计推广人数")])),_:1})])),_:1}),d(u,{class:"stats-item"},{default:c((()=>[d(u,{class:"stats-value"},{default:c((()=>[_(m(f(P).direct_count||0),1)])),_:1}),d(u,{class:"stats-label"},{default:c((()=>[_("直接推广人数")])),_:1})])),_:1}),d(u,{class:"stats-item"},{default:c((()=>[d(u,{class:"stats-value"},{default:c((()=>[_(m(f(P).indirect_count||0),1)])),_:1}),d(u,{class:"stats-label"},{default:c((()=>[_("间接推广人数")])),_:1})])),_:1})])),_:1}),d(u,{class:"stats-row"},{default:c((()=>[d(u,{class:"stats-item"},{default:c((()=>[d(u,{class:"stats-value"},{default:c((()=>[_(m(f(P).margin_amount||"0"),1)])),_:1}),d(u,{class:"stats-label"},{default:c((()=>[_("押金减免额度")])),_:1})])),_:1}),d(u,{class:"stats-item"},{default:c((()=>[d(u,{class:"stats-value"},{default:c((()=>[_(m(f(P).total_direct_margin_amount||0),1)])),_:1}),d(u,{class:"stats-label"},{default:c((()=>[_("直接推广收益")])),_:1})])),_:1}),d(u,{class:"stats-item"},{default:c((()=>[d(u,{class:"stats-value"},{default:c((()=>[_(m(f(P).total_indirect_margin_amount||0),1)])),_:1}),d(u,{class:"stats-label"},{default:c((()=>[_("间接推广收益")])),_:1})])),_:1})])),_:1})])),_:1}),d(u,{class:"notice-box"},{default:c((()=>[d(u,{class:"notice-title"},{default:c((()=>[d(x,{"custom-prefix":"iconfont",type:"icon-dengpao",size:"30rpx",color:"#ffffff"}),_("  温馨提示 ")])),_:1}),d(u,{class:"notice-content"},{default:c((()=>[_(" 您发展来的下级在通过平台资料审核后被纳入到您名下有直推，您将获得押金减免额度和直推收益 ")])),_:1})])),_:1}),d(u,{class:"ranking-card"},{default:c((()=>[d(u,{class:"card-header"},{default:c((()=>[d(u,{class:"header-left"},{default:c((()=>[d(u,{class:"red-bar"}),d(k,{class:"title"},{default:c((()=>[_("团队排行（共"+m(f(q).length)+"人）",1)])),_:1})])),_:1}),d(u,{class:"revenue-btn",onClick:A},{default:c((()=>[_(" 推广收益明细 "),d(B,{name:"arrow-right",color:"#fff",size:"24rpx",style:{"margin-left":"4rpx"}})])),_:1})])),_:1}),v("",!0),d(u,{class:"team-list"},{default:c((()=>[d(S,{isRefreshing:f(O),loadStatus:f(N),enableRefresh:!1,enableLoadMore:!0,onOnRefresh:M,onOnScrollToLower:T},{scrollContain:c((()=>[(r(!0),g(b,null,p(f(q),((a,s)=>(r(),o(u,{class:"team-item",key:s},{default:c((()=>[d(R,{class:"avatar",src:a.avatar||"/static/images/public_logo.png",mode:"aspectFill"},null,8,["src"]),d(u,{class:"item-info"},{default:c((()=>[d(u,{class:"name-row"},{default:c((()=>[d(k,{class:"name"},{default:c((()=>[_(m(a.nick_name),1)])),_:2},1024),d(u,{class:"tag"},{default:c((()=>[_("直推"+m(a.direct_margin_amount||"0")+"人",1)])),_:2},1024)])),_:2},1024),d(u,{class:"account"},{default:c((()=>[_("账号："+m(a.username),1)])),_:2},1024)])),_:2},1024),d(u,{class:"item-right"},{default:c((()=>[d(u,{class:"revenue"},{default:c((()=>[_("¥"+m(a.total_margin_amount),1)])),_:2},1024),d(u,{class:"order-count"},{default:c((()=>[_("共"+m(a.total_task_completed_count)+"单",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["isRefreshing","loadStatus"])])),_:1})])),_:1})])),_:1}),d(u,{class:"fixed-bottom"},{default:c((()=>[d(F,{text:"我的推广码",onClick:D})])),_:1})])),_:1})}}},[["__scopeId","data-v-bbc33bbe"]]);export{S as default};
