import{_ as a,Q as e,r as l,c as t,d as s,C as o,D as n,a as c,b as u,f as r,P as i,az as d,J as m,m as p,E as f,aq as _,o as h,j as g,u as b,k as x,t as v,Z as y,H as k,g as C,h as F,F as w,aW as I,A as j,I as z}from"./index-CRrG_siP.js";import{_ as N}from"./Navigation.CDuvAZ9P.js";import{_ as S}from"./CxComfirmBtn.BQaNQIo1.js";import{_ as U}from"./CxIconFont.DOMp3E9J.js";import{_ as X}from"./uni-icons.cB7ZEcfD.js";const $=a({__name:"withdraw-cash",setup(a){e((a=>({"04f251d9":A})));const{proxy:$}=i(),A=$.$safeAreaInfo.top+80+"rpx";let D=l("余额提现");l(22123),l(212334);const V=l(""),B=l(0),E=l([]),L=a=>a.toLocaleString("zh-CN",{minimumFractionDigits:2}),W=()=>{V.value=L($.$globalUserInfoXn.amount),console.log("全部提现",V.value)},q=()=>{const a=Number(V.value);a<1&&0!==a&&(m("每次提现不得少于1元"),V.value="")},H=t((()=>{const a=Number(V.value);return a>=1&&a<=$.$globalUserInfoXn.amount})),J=()=>{H.value&&(m("提现申请已提交，请等待到账"),E.value[B.value].id?I({amount:V.value,user_bank_id:E.value[B.value].id}).then((a=>{200===a.code?(m("提现申请已提交，请等待到账"),V.value=""):m({title:a.msg||"提现申请提交失败",icon:"none"})})):m("请选择提现方式"))},P=()=>{z({url:"/pages/xn/income/withdrawal-record"})};return s((()=>{(async()=>{const{code:a=9999,data:e,msg:l}=await d();200===a?(null==e?void 0:e.lists.length)>0&&e.lists.forEach((a=>{1==a.type?E.value.push({...a,name:a.account_name,icon:"&#xe607;",color:"#07c160"}):2==a.type?E.value.push({...a,name:a.account_name,icon:"&#xe60a;",color:"#1677FF"}):3==a.type&&E.value.push({...a,name:a.account_name,icon:"&#xe63f;",color:"#FFA937"})})):m({title:l||"数据加载失败",icon:"none"})})()})),(a,e)=>{const l=o(n("LayoutNavigation"),N),t=j,s=p,i=o(n("CxComfirmBtn"),S),d=c("up-input"),m=o(n("CxIconFont"),U),I=o(n("u-icon"),f),z=o(n("uni-icons"),X),$=o(n("u-button"),_);return h(),u(s,{class:"page-wrap withdraw-cash-page"},{default:r((()=>[g(l,{title:b(D)},null,8,["title"]),g(s,{class:"page-content"},{default:r((()=>[g(s,{class:"card balance-card"},{default:r((()=>[g(s,{class:"left"},{default:r((()=>[g(t,{class:"label"},{default:r((()=>[x("¥")])),_:1}),g(t,{class:"amount"},{default:r((()=>[x(v(L(a.$globalUserInfoXn.amount)),1)])),_:1})])),_:1}),g(s,{class:"right"},{default:r((()=>[g(s,{class:"cash-btn"},{default:r((()=>[g(i,{text:"提现记录",onClick:y(P,["stop"]),btnStyle:{height:"40rpx",width:"120rpx",padding:"0rpx 10rpx",background:"none",color:"#523027",borderColor:"#523027"},textStyle:{fontSize:"24rpx",fontWeight:"bold"}})])),_:1})])),_:1})])),_:1}),g(s,{class:"card amount-card"},{default:r((()=>[g(t,{class:"title"},{default:r((()=>[x("提现金额")])),_:1}),g(s,{class:"input-wrapper"},{default:r((()=>[g(t,{class:"yen"},{default:r((()=>[x("¥")])),_:1}),g(d,{modelValue:b(V),"onUpdate:modelValue":e[0]||(e[0]=a=>k(V)?V.value=a:null),type:"number",placeholder:"请输入提现金额",class:"input",onInput:q},null,8,["modelValue"]),g(t,{class:"all",onClick:W},{default:r((()=>[x("全部提现")])),_:1})])),_:1}),g(t,{class:"tip"},{default:r((()=>[x("可提现金额：¥"+v(L(a.$globalUserInfoXn.amount))+", 每次提现不得少于1元",1)])),_:1})])),_:1}),g(s,{class:"card method-card"},{default:r((()=>[g(t,{class:"title"},{default:r((()=>[x("提现方式")])),_:1}),g(s,{class:"method-list"},{default:r((()=>[(h(!0),C(w,null,F(b(E),((a,e)=>(h(),u(s,{key:e,class:"method-item",onClick:a=>(a=>{B.value=a})(e)},{default:r((()=>[g(s,{class:"left"},{default:r((()=>[g(m,{code:a.icon,size:"40rpx",color:a.color},null,8,["code","color"]),x("    "),g(t,null,{default:r((()=>[x(v(a.account_name)+" "+v(a.opening_bank),1)])),_:2},1024)])),_:2},1024),b(B)==e?(h(),u(I,{key:0,name:"checkmark-circle-fill",color:"#FF4D4F",size:"30rpx"})):(h(),u(z,{key:1,type:"circle",color:"#ccc",size:"30rpx"}))])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),g(s,{class:"submit-btn"},{default:r((()=>[g($,{type:"error",shape:"circle",disabled:!b(H),onClick:J},{default:r((()=>[x("立即提现")])),_:1},8,["disabled"])])),_:1})])),_:1}),g(s)])),_:1})}}},[["__scopeId","data-v-4d85224a"]]);export{$ as default};
