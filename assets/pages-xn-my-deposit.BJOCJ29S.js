import{_ as a,r as e,c as t,d as s,a4 as l,C as o,D as n,a as i,g as c,j as r,f as u,u as d,H as p,F as f,Q as m,ao as _,J as b,a9 as v,m as x,aE as y,E as g,aU as k,o as h,k as w,b as C,h as F,aV as z,af as j,A as S,p as D,t as T}from"./index-DiJpDbC3.js";import{_ as E}from"./Navigation.CPbYaFbJ.js";import{_ as U}from"./CxComfirmBtn.CPDBkoVY.js";import{_ as B,a as N}from"./payment-confirm.DSmhM4ta.js";import{_ as R}from"./uni-icons.BojgTGkH.js";const W=a({__name:"deposit",setup(a){const{proxy:W}=m(),A=e(null);A.value=W.getOpenerEventChannel();let H=e("压金"),I=e(!1),J=e(!1),L=e(!1),M=e([]),O=e({}),P=e(0),Q=e(["压金单独支付，包含违约保证金和退货压金两个部分；","压金以5000元为固定额度；","压金以5000元起步，每季度根据上季度月平均商家好店整体营业额调整，只升不降；","压金额度不满时，需在10个自然日内补齐"]);const V=e({deposit:0,label:"(1000 - 6000)￥"}),Y=t((()=>{var a;return(null==(a=V.value)?void 0:a.deposit)>0})),$=async()=>{L.value=!0,J.value=!0},q=async()=>{L.value=!1,J.value=!0;const{code:a,msg:e,data:t={}}=await z({address_id:O.value.id,order_id:V.value.order_id});return 200==a?(b({title:"缴纳压金成功",icon:"success"}),void setTimeout((()=>{j()}),1500)):100028==a?(b({title:e||"余额不足，请先充值",icon:"none"}),void setTimeout((()=>{j()}),1500)):(b({title:e||"缴纳压金失败",icon:"none"}),void setTimeout((()=>{j()}),1500))},G=()=>{L.value=!0};return s((async()=>{(async()=>{const{code:a,msg:e,data:t={}}=await _();200==a?M.value=t.lists||[]:b({title:e||"地址加载失败",icon:"none"})})()})),l((a=>{a.id&&a.id,A.value.on("sendMarginDatas",(a=>{V.value=a.marginResultData||{}}))})),(a,e)=>{const t=o(n("LayoutNavigation"),E),s=S,l=o(n("u-cell"),v),m=x,_=o(n("u-text"),y),b=o(n("CxComfirmBtn"),U),z=D,j=i("up-text"),W=o(n("CxPopup"),B),A=o(n("u-icon"),g),K=o(n("uni-icons"),R),X=o(n("u-popup"),k);return h(),c(f,null,[r(m,{class:"page-wrap pay-deposit"},{default:u((()=>[r(t,{title:d(H)},null,8,["title"]),r(m,{class:"page-content"},{default:u((()=>[r(m,{class:"sys-block-result"},{default:u((()=>[r(s,{class:"sys-result-title"},{default:u((()=>[w("需要缴纳压金")])),_:1}),r(m,{class:"form-container"},{default:u((()=>[(h(),C(l,{key:a.index,border:!1,class:"form-item",title:`￥ ${d(V).deposit??0}`,value:d(V).label,"title-style":{fontSize:"32rpx",fontWeight:"bold",color:"#333"},"value-style":{fontSize:"30rpx",color:"#666"}},null,8,["title","value"]))])),_:1})])),_:1}),r(m,{class:"guarantee-card"},{default:u((()=>[r(_,{text:"保证金说明",color:"#FFFFFF",size:"30rpx",class:"title"}),r(m,{class:"content"},{default:u((()=>[(h(!0),c(f,null,F(d(Q),((a,e)=>(h(),C(m,{class:"item",key:e},{default:u((()=>[r(s,{class:"number"},{default:u((()=>[w(T(e+1)+"、",1)])),_:2},1024),r(s,{class:"text"},{default:u((()=>[w(T(a),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),r(m,{class:"confirm-btn-wrap"},{default:u((()=>[r(b,{text:"立即缴纳",disabled:!d(Y),onClick:G},null,8,["disabled"])])),_:1})])),_:1}),r(m,{class:"cx-popup"},{default:u((()=>[r(W,{show:d(I),"onUpdate:show":e[0]||(e[0]=a=>p(I)?I.value=a:I=a)},{popupContent:u((a=>[r(m,{class:"payment-confirm-wrap"},{default:u((()=>[r(z,{class:"payment-icon",mode:"aspectFill",src:N}),r(j,{size:"34rpx",bold:"",align:"center",text:"我已知晓"}),r(j,{align:"center",color:"#999",text:"缴纳前请仔细阅读保证金说明"})])),_:1}),r(m,{class:"enter-wrap"},{default:u((()=>[r(b,{text:"确认缴费",loading:d(J),onClick:$},null,8,["loading"])])),_:1})])),_:1},8,["show"])])),_:1})])),_:1}),r(X,{show:d(L),"onUpdate:show":e[2]||(e[2]=a=>p(L)?L.value=a:L=a),mode:"bottom","border-radius":20,closeable:"","close-icon-pos":"top-right","mask-close-able":!0,"safe-area-inset-bottom":!0,"z-index":9999,"custom-style":{width:"100%",maxWidth:"100%",background:"#7a1e28"}},{default:u((()=>[r(m,{class:"payment-list-warpper"},{default:u((()=>[r(m,{class:"title"},{default:u((()=>[w("请选择您的收货地址")])),_:1}),r(m,{class:"payment-list"},{default:u((()=>[(h(!0),c(f,null,F(d(M),((a,e)=>(h(),C(m,{key:e,class:"method-item",onClick:t=>((a,e)=>{P.value=e,O.value=a})(a,e)},{default:u((()=>[r(m,{class:"left"},{default:u((()=>[r(s,null,{default:u((()=>[w(T(a.contact_person)+" "+T(a.contact_phone)+" "+T(a.detail_address),1)])),_:2},1024)])),_:2},1024),d(P)===e?(h(),C(A,{key:0,name:"checkmark-circle-fill",color:"#FF4D4F",size:"30rpx"})):(h(),C(K,{key:1,type:"circle",color:"#ccc",size:"30"}))])),_:2},1032,["onClick"])))),128))])),_:1}),r(m,{class:"btn-group"},{default:u((()=>[r(b,{text:"取消",onClick:e[1]||(e[1]=a=>p(L)?L.value=!1:L=!1),btnStyle:{flex:1,marginRight:"10px",background:"transparent",border:"2px solid #fff",color:"#fff"}}),r(b,{text:"确定",onClick:q,btnStyle:{flex:1,background:"linear-gradient(90deg, #ff6b6b, #ff9c6b)",color:"#fff"}},null,8,["btnStyle"])])),_:1})])),_:1})])),_:1},8,["show"])],64)}}},[["__scopeId","data-v-b63d7b59"]]);export{W as default};
