import{_ as a,Q as e,R as t,r as s,af as l,d as o,aC as n,C as c,D as i,b as r,f as u,P as f,E as d,m as p,o as m,j as _,u as g,k,Z as y,g as x,F as b,av as C,J as h,at as v,aD as F,V as w,A as D,p as j,au as z}from"./index-bLIxdInw.js";import{_ as A}from"./Navigation.DvAH-mKo.js";import{_ as I}from"./CxComfirmBtn.BhasumNO.js";const N=a({__name:"identity-authentication",setup(a){e((a=>({"8916b760":P})));const{proxy:N}=f(),P=N.$safeAreaInfo.top+80+"rpx",B=t();let E=s("身份认证"),L=s(!1),Q=s(!0);const R=N.getOpenerEventChannel();let J=l({front:"",back:""});const O=a=>{z({urls:[a]})},T=a=>{console.log("点击上传"+("front"===a?"正面":"反面")),C({count:1,success:e=>{console.log("选择图片成功:",e.tempFilePaths[0]),J[a]=e.tempFilePaths[0]}})},U=async()=>{if(J.front&&J.back){L.value=!0;try{const a=await v(J.front),e=await v(J.back),t=await F({front_image:a.data.url||"",back_image:e.data.url||""}),{code:s=9999,data:l,msg:o}=t;200===s?(h({title:"上传成功，等待审核",icon:"success"}),B.updateUserInfo("XN",{real_name_check:1}),setTimeout((()=>{w({url:"/pages/index"})}),1500)):h({title:o||"上传失败，请重试",icon:"none"})}catch(a){console.error("认证失败",a),h({title:"string"==typeof a?a:a.msg||"上传请求异常",icon:"none"})}finally{L.value=!1}}else h({title:"请上传身份证正反面",icon:"none"})};return o((async()=>{R.on("acceptLevelData",(a=>{console.log("接收到的数据：",a)})),await n()})),(a,e)=>{const t=c(i("LayoutNavigation"),A),s=D,l=j,o=c(i("u-icon"),d),n=p,f=c(i("CxComfirmBtn"),I);return m(),r(n,{class:"page-wrap index"},{default:u((()=>[_(t,{title:g(E)},{right:u((()=>[])),_:1},8,["title"]),g(Q)?(m(),r(n,{key:0,class:"page-content"},{default:u((()=>[_(n,{class:"container"},{default:u((()=>[_(n,{class:"background-pattern"},{default:u((()=>[_(n,{class:"content-box"},{default:u((()=>[_(n,{class:"upload-item"},{default:u((()=>[_(s,{class:"label"},{default:u((()=>[k("身份证正面")])),_:1}),_(n,{class:"upload-area",onClick:e[1]||(e[1]=a=>T("front"))},{default:u((()=>[g(J).front?(m(),r(l,{key:0,src:g(J).front,class:"preview-img",mode:"widthFix",onClick:e[0]||(e[0]=y((a=>O(g(J).front)),["stop"]))},null,8,["src"])):(m(),x(b,{key:1},[_(o,{name:"plus",color:"#FF4D4D",size:"60"}),_(s,{class:"tip"},{default:u((()=>[k("点击上传")])),_:1})],64))])),_:1})])),_:1}),_(n,{class:"upload-item"},{default:u((()=>[_(s,{class:"label"},{default:u((()=>[k("身份证反面")])),_:1}),_(n,{class:"upload-area",onClick:e[3]||(e[3]=a=>T("back"))},{default:u((()=>[g(J).back?(m(),r(l,{key:0,src:g(J).back,class:"preview-img",mode:"widthFix",onClick:e[2]||(e[2]=y((a=>O(g(J).back)),["stop"]))},null,8,["src"])):(m(),x(b,{key:1},[_(o,{name:"plus",color:"#FF4D4D",size:"60"}),_(s,{class:"tip"},{default:u((()=>[k("点击上传")])),_:1})],64))])),_:1})])),_:1})])),_:1})])),_:1}),_(n,{class:"submit-btn"},{default:u((()=>[_(f,{text:"开始上传",loading:g(L),onClick:U},null,8,["loading"])])),_:1})])),_:1})])),_:1})):(m(),r(n,{key:1,class:"page-content"},{default:u((()=>[_(n,{class:"container"},{default:u((()=>[_(n,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:u((()=>[_(o,{name:"checkmark-circle",color:"#4CAF50",size:"50"}),_(n,{style:{"font-size":"32rpx",color:"#fff"}},{default:u((()=>[k("   您已提交身份认证申请")])),_:1})])),_:1}),_(n,{style:{"font-size":"28rpx",color:"#666","margin-top":"10rpx","text-align":"center"}},{default:u((()=>[k("请耐心等待审核结果")])),_:1})])),_:1})])),_:1})),_(n)])),_:1})}}},[["__scopeId","data-v-a30a1a53"]]);export{N as default};
