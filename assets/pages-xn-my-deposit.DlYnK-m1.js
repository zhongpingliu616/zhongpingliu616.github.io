import{_ as a,r as e,c as t,d as s,a6 as l,C as o,D as n,a as i,b as c,f as r,Q as u,aq as d,J as p,ab as f,m,aG as _,E as b,aW as v,o as x,j as g,u as y,k,g as h,h as w,F as C,H as F,aX as z,ah as j,A as S,p as D,t as T}from"./index-vfEMzM-K.js";import{_ as W}from"./Navigation.nOf0Yq_M.js";import{_ as B}from"./CxComfirmBtn.DxLwN25C.js";import{_ as E,a as N}from"./payment-confirm.B7V9RrMI.js";import{_ as R}from"./uni-icons.CGzo0qCP.js";const U=a({__name:"deposit",setup(a){const{proxy:U}=u(),q=e(null);q.value=U.getOpenerEventChannel();let A=e("压金"),G=e(!1),H=e(!1),I=e(!1),J=e([]),L=e({}),M=e(0),O=e(["压金单独支付，包含违约保证金和退货压金两个部分；","压金以5000元为固定额度；","压金以5000元起步，每季度根据上季度月平均商家好店整体营业额调整，只升不降；","压金额度不满时，需在10个自然日内补齐"]);const P=e({deposit:0,label:"(1000 - 6000)￥"}),Q=t((()=>{var a;return(null==(a=P.value)?void 0:a.deposit)>0})),X=async()=>{I.value=!0,H.value=!0},Y=async()=>{I.value=!1,H.value=!0;const{code:a,msg:e,data:t={}}=await z({address_id:L.value.id,order_id:P.value.order_id});return 200==a?(p({title:"缴纳压金成功",icon:"success"}),void setTimeout((()=>{j()}),1500)):100028==a?(p({title:e||"余额不足，请先充值",icon:"none"}),void setTimeout((()=>{j()}),1500)):(p({title:e||"缴纳压金失败",icon:"none"}),void setTimeout((()=>{j()}),1500))},$=()=>{I.value=!0};return s((async()=>{(async()=>{const{code:a,msg:e,data:t={}}=await d();200==a?J.value=t.lists||[]:p({title:e||"地址加载失败",icon:"none"})})()})),l((a=>{a.id&&a.id,q.value.on("sendMarginDatas",(a=>{P.value=a.marginResultData||{}}))})),(a,e)=>{const t=o(n("LayoutNavigation"),W),s=S,l=o(n("u-cell"),f),u=m,d=o(n("u-text"),_),p=o(n("CxComfirmBtn"),B),z=D,j=i("up-text"),U=o(n("CxPopup"),E),q=o(n("u-icon"),b),K=o(n("uni-icons"),R),V=o(n("u-popup"),v);return x(),c(u,{class:"page-wrap pay-deposit"},{default:r((()=>[g(t,{title:y(A)},null,8,["title"]),g(u,{class:"page-content"},{default:r((()=>[g(u,{class:"sys-block-result"},{default:r((()=>[g(s,{class:"sys-result-title"},{default:r((()=>[k("需要缴纳压金")])),_:1}),g(u,{class:"form-container"},{default:r((()=>[g(l,{border:!1,class:"form-item",title:`￥ ${y(P).deposit??0}`,value:y(P).label,"title-style":{fontSize:"32rpx",fontWeight:"bold",color:"#333"},"value-style":{fontSize:"30rpx",color:"#666"}},null,8,["title","value"])])),_:1})])),_:1}),g(u,{class:"guarantee-card"},{default:r((()=>[g(d,{text:"保证金说明",color:"#FFFFFF",size:"30rpx",class:"title"}),g(u,{class:"content"},{default:r((()=>[(x(!0),h(C,null,w(y(O),((a,e)=>(x(),c(u,{class:"item",key:e},{default:r((()=>[g(s,{class:"number"},{default:r((()=>[k(T(e+1)+"、",1)])),_:2},1024),g(s,{class:"text"},{default:r((()=>[k(T(a),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),g(u,{class:"confirm-btn-wrap"},{default:r((()=>[g(p,{text:"立即缴纳",disabled:!y(Q),onClick:$},null,8,["disabled"])])),_:1})])),_:1}),g(u,{class:"cx-popup"},{default:r((()=>[g(U,{show:y(G),"onUpdate:show":e[0]||(e[0]=a=>F(G)?G.value=a:G=a)},{popupContent:r((a=>[g(u,{class:"payment-confirm-wrap"},{default:r((()=>[g(z,{class:"payment-icon",mode:"aspectFill",src:N}),g(j,{size:"34rpx",bold:"",align:"center",text:"我已知晓"}),g(j,{align:"center",color:"#999",text:"缴纳前请仔细阅读保证金说明"})])),_:1}),g(u,{class:"enter-wrap"},{default:r((()=>[g(p,{text:"确认缴费",loading:y(H),onClick:X},null,8,["loading"])])),_:1})])),_:1},8,["show"])])),_:1}),g(V,{show:y(I),"onUpdate:show":e[2]||(e[2]=a=>F(I)?I.value=a:I=a),mode:"bottom","border-radius":20,closeable:"","close-icon-pos":"top-right","mask-close-able":!0,"safe-area-inset-bottom":!0,"z-index":9999,"custom-style":{width:"100%",maxWidth:"100%",background:"#7a1e28"}},{default:r((()=>[g(u,{class:"payment-list-warpper"},{default:r((()=>[g(u,{class:"title"},{default:r((()=>[k("请选择您的收货地址")])),_:1}),g(u,{class:"payment-list"},{default:r((()=>[(x(!0),h(C,null,w(y(J),((a,e)=>(x(),c(u,{key:e,class:"method-item",onClick:t=>((a,e)=>{M.value=e,L.value=a})(a,e)},{default:r((()=>[g(u,{class:"left"},{default:r((()=>[g(s,null,{default:r((()=>[k(T(a.contact_person)+" "+T(a.contact_phone)+" "+T(a.detail_address),1)])),_:2},1024)])),_:2},1024),y(M)===e?(x(),c(q,{key:0,name:"checkmark-circle-fill",color:"#FF4D4F",size:"30rpx"})):(x(),c(K,{key:1,type:"circle",color:"#ccc",size:"30rpx"}))])),_:2},1032,["onClick"])))),128))])),_:1}),g(u,{class:"btn-group"},{default:r((()=>[g(p,{text:"取消",onClick:e[1]||(e[1]=a=>F(I)?I.value=!1:I=!1),btnStyle:{flex:1,marginRight:"10px",background:"transparent",border:"2px solid #fff",color:"#fff"}}),g(p,{text:"确定",onClick:Y,btnStyle:{flex:1,background:"linear-gradient(90deg, #ff6b6b, #ff9c6b)",color:"#fff"}},null,8,["btnStyle"])])),_:1})])),_:1})])),_:1},8,["show"])])),_:1})}}},[["__scopeId","data-v-a811bbcf"]]);export{U as default};
