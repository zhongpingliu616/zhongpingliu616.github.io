import{C as e,z as t,D as o,M as i,E as n,A as s,N as r}from"./index-k1hY-fi1.js";const a={webUrl:"https://elszjh.cn",imgUrl:"https://elszjh.cn"};function d(d){const{url:c,method:l="POST",data:u={},header:m={},needToken:g=!1,loading:h=!0}=d,p={"content-type":"application/x-www-form-urlencoded",...m};if(g){const o=e("token");if(!o)return t({url:"/pages/login"}),Promise.reject(new Error("未登录"));p.token=o,"object"==typeof u&&null!==u&&(u.token=o)}return h&&o({title:"加载中...",mask:!0}),new Promise((e,o)=>{i({url:a.webUrl+c,method:l,data:u,header:p,success:i=>{h&&n();const a=i.data;if(401===a.code||-2===a.code)return r("token"),s({title:"登录已过期",icon:"none"}),setTimeout(()=>t({url:"/pages/login"}),1500),void o(a);e(a)},fail:e=>{h&&n(),console.error("请求失败:",e),s({title:"网络请求失败",icon:"none"}),o(e)}})})}function c(e,t,o=!1,i=!1){return d({url:e,method:"POST",data:t,needToken:o,loading:i})}function l(e,t,o=!1,i=!1){return d({url:e,method:"GET",data:t,needToken:o,loading:i})}const u={login:e=>c("/api/home/user/login",e),register:e=>c("/api/home/user/register",e),getUserInfo:()=>l("/api/home/user/index",{},!0),shiming:e=>c("/api/home/user/shiming",e,!0),withdraw:e=>c("/api/home/user/withdraw",e,!0),getAssets:()=>l("/api/home/user/zichan",{},!0),getIncomeList:e=>l("/api/home/user/income",e,!0)},m={getConfig:()=>l("/api/?a=getConfig"),getNewsList:e=>l("/api/home/index/news",e),getVideoList:e=>l("/api/home/video/lists",e),getProductList:()=>l("/api/?c=Product&a=list")};export{a,m as c,u};
