import{_ as e,x as t,y as a,z as l,o as s,b as c,f as o,j as n,a1 as i,k as u,t as r,U as d,l as m,m as p,p as f,E as _,r as g,c as v,d as y,aS as x,aH as h,u as k,g as C,h as b,F as S,D as w,aT as F}from"./index-E36eYFUz.js";import{_ as z}from"./Navigation.fXnM5b3z.js";import{_ as $}from"./ProductList.aAvT4MfD.js";import{_ as j}from"./CxCheckbox.Ddh6wFPS.js";import{_ as N}from"./CxComfirmBtn.D_Y-qTM9.js";const T=e({__name:"ProductRow",props:{item:{type:Object,required:!0,default:()=>({})},management:{type:Boolean,default:!1}},emits:["update:selected","update:count","click","delete"],setup(e,{emit:g}){const v=e,y=g,x=()=>{y("update:selected",!v.item.selected)},h=()=>{y("click",v.item)},k=e=>{const t=v.item.count+e;t<1||y("update:count",t)};return(g,v)=>{const y=t(a("CxCheckbox"),j),C=p,b=f,S=_,w=t(a("u-icon"),l);return s(),c(C,{class:"product-row"},{default:o((()=>[n(C,{class:"checkbox-wrapper",onClick:i(x,["stop"])},{default:o((()=>[n(y,{modelValue:e.item.selected,size:36},null,8,["modelValue"])])),_:1}),n(C,{class:"content-wrapper",onClick:h},{default:o((()=>[n(b,{src:e.item.image,mode:"aspectFill",class:"product-image"},null,8,["src"]),n(C,{class:"product-info"},{default:o((()=>[n(C,{class:"title-row"},{default:o((()=>[n(S,{class:"title"},{default:o((()=>[u(r(e.item.title),1)])),_:1})])),_:1}),n(C,{class:"meta-row"},{default:o((()=>["nft"===e.item.type?(s(),c(S,{key:0,class:"meta-text"},{default:o((()=>[u("ID: "+r(e.item.id),1)])),_:1})):(s(),c(S,{key:1,class:"meta-text"},{default:o((()=>[u("超"+r(e.item.viewCount||321)+"人看过",1)])),_:1}))])),_:1}),n(C,{class:"tags-row"},{default:o((()=>[n(C,{class:d(["tag-badge","nft"===e.item.type?"nft-tag":"real-tag"])},{default:o((()=>[u(r("nft"===e.item.type?"NFT藏品":"实物藏品"),1)])),_:1},8,["class"]),"nft"===e.item.type?(s(),c(S,{key:0,class:"trend-text"},{default:o((()=>[u("比昨日上涨0.05%")])),_:1})):m("",!0)])),_:1}),n(C,{class:"price-action-row"},{default:o((()=>[n(C,{class:"price-box"},{default:o((()=>[n(S,{class:"currency"},{default:o((()=>[u("¥")])),_:1}),n(S,{class:"price"},{default:o((()=>{return[u(r((t=e.item.price,Number(t).toFixed(2))),1)];var t})),_:1}),n(S,{class:"original-price"},{default:o((()=>[u("¥"+r(e.item.originalPrice||(1.1*e.item.price).toFixed(2)),1)])),_:1})])),_:1}),"nft"!==e.item.type||e.management?(s(),c(C,{key:0,class:"quantity-control"},{default:o((()=>["nft"!==e.item.type||e.management?(s(),c(C,{key:0,class:"stepper"},{default:o((()=>[n(C,{class:"step-btn minus",onClick:v[0]||(v[0]=i((e=>k(-1)),["stop"]))},{default:o((()=>[n(w,{name:"minus",size:"16",color:"#333"})])),_:1}),n(S,{class:"step-value"},{default:o((()=>[u(r(e.item.count),1)])),_:1}),n(C,{class:"step-btn plus",onClick:v[1]||(v[1]=i((e=>k(1)),["stop"]))},{default:o((()=>[n(w,{name:"plus",size:"16",color:"#333"})])),_:1})])),_:1})):m("",!0)])),_:1})):(s(),c(C,{key:1,class:"quantity-display"},{default:o((()=>[n(S,{class:"count-x"},{default:o((()=>[u("x"+r(e.item.count),1)])),_:1})])),_:1}))])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-80a8b585"]]),A=e({__name:"shopping-cart",setup(e){const l=g("购物车"),i=g(!1),d=g(0),f=[{name:"NFT藏品"},{name:"实物藏品"}];let A=g([]);g([]);let L=g(!1),P=g(!1),R=g(!1),U=g("loadmore");const B=e=>{d.value=e.index},D=v((()=>{const e=0===d.value?"nft":"real";return A.value.filter((t=>t.type===e))})),I=v((()=>{const e=D.value;return e.length>0&&e.every((e=>e.selected))})),q=v((()=>D.value.filter((e=>e.selected)))),E=v((()=>q.value.length)),O=v((()=>q.value.reduce(((e,t)=>e+t.price*t.count),0))),V=()=>{i.value=!i.value},G=()=>{const e=!I.value;D.value.forEach((t=>{t.selected=e}))},H=()=>{0!==E.value&&w({title:`结算 ${E.value} 件商品`,icon:"none"})},M=()=>{0!==E.value&&F({title:"提示",content:`确认删除选中的 ${E.value} 件商品吗？`,confirmColor:"#D1A156",success:e=>{if(e.confirm){const e=new Set(q.value.map((e=>e.id)));A.value=A.value.filter((t=>!e.has(t.id))),w({title:"删除成功",icon:"success"})}}})};y((()=>{W()}));const W=async(e=!1)=>{e?(P.value=!0,U.value="loading"):(L.value=!0,U.value="loading"),setTimeout((()=>{(e||0===A.value.length)&&(A.value=[...Array.from({length:10},((e,t)=>({id:`NFT-2024-${String(t+1).padStart(3,"0")}`,type:"nft",selected:!1,image:`https://picsum.photos/seed/nft${t}/200/200`,title:`玄色 · 凤凰刺绣 NFT #${t+1}`,price:188,originalPrice:198,count:1,viewCount:0}))),...Array.from({length:10},((e,t)=>({id:`REAL-2024-${String(t+1).padStart(3,"0")}`,type:"real",selected:!1,image:`https://picsum.photos/seed/real${t}/200/200`,title:`手工苏绣团扇 实物商品 #${t+1}`,price:368,originalPrice:488,count:1,viewCount:300+12*t})))]),L.value=!1,P.value=!1,R.value=!0,U.value="nomore"}),1e3)},J=()=>{W(!0)},K=()=>{};return(e,g)=>{const v=_,y=t(a("LayoutNavigation"),z),w=t(a("u-tabs"),x),F=p,A=t(a("u-empty"),h),R=t(a("BaseProductList"),$),q=t(a("CxCheckbox"),j),W=t(a("CxComfirmBtn"),N);return s(),c(F,{class:"page-wrap index"},{default:o((()=>[n(y,{type:"gz",title:k(l)},{right:o((()=>[n(v,{class:"nav-right-text",onClick:V},{default:o((()=>[u(r(k(i)?"取消管理":"管理"),1)])),_:1})])),_:1},8,["title"]),n(F,{class:"page-content"},{default:o((()=>[n(F,{class:"tabs-container"},{default:o((()=>[n(w,{list:f,current:k(d),onClick:B,lineColor:"#fff",activeStyle:{color:"#fff",fontWeight:"bold",fontSize:"32rpx"},inactiveStyle:{color:"rgba(255,255,255,0.7)",fontSize:"28rpx"},itemStyle:"height: 68rpx;",bgColor:"transparent"},null,8,["current","inactiveStyle"]),n(F,{class:"search-filter-icons"})])),_:1}),n(F,{class:"cart-container"},{default:o((()=>[n(R,{onOnRefresh:J,onOnScrollToLower:K,isRefreshing:k(P),loadStatus:k(U),enableRefresh:!0,enableLoadMore:!0},{scrollContain:o((()=>[n(F,{class:"list-content"},{default:o((()=>[(s(!0),C(S,null,b(k(D),((e,t)=>(s(),c(T,{key:e.id,item:e,management:k(i),"onUpdate:selected":t=>((e,t)=>{e.selected=t})(e,t),"onUpdate:count":t=>((e,t)=>{e.count=t})(e,t),onClick:t=>(e=>{console.log("Item clicked:",e)})(e)},null,8,["item","management","onUpdate:selected","onUpdate:count","onClick"])))),128))])),_:1}),0!==k(D).length||k(L)?m("",!0):(s(),c(A,{key:0,text:"购物车空空如也",textColor:"#D1A156",iconColor:"#ccc",mode:"shopping",class:"empty"}))])),_:1},8,["isRefreshing","loadStatus"])])),_:1})])),_:1}),n(F,{class:"cart-bar"},{default:o((()=>[n(F,{class:"left",onClick:G},{default:o((()=>[n(q,{"model-value":k(I),size:36},null,8,["model-value"]),n(v,{class:"select-all"},{default:o((()=>[u("全选")])),_:1})])),_:1}),n(F,{class:"right"},{default:o((()=>[k(i)?(s(),c(W,{key:1,class:"delete-btn",btnStyle:{width:"140rpx"},text:"删除",onClick:M})):(s(),C(S,{key:0},[n(F,{class:"price"},{default:o((()=>[n(v,null,{default:o((()=>[u("合计"),k(E)>0?(s(),c(v,{key:0},{default:o((()=>[u("("+r(k(E))+")",1)])),_:1})):m("",!0),u(": ")])),_:1}),n(v,{class:"amount"},{default:o((()=>[u("¥"+r(k(O).toFixed(2)),1)])),_:1})])),_:1}),n(F,{class:"checkout-btn"},{default:o((()=>[n(W,{text:"去结算",btnStyle:{width:"140rpx"},disabled:0===k(E),onClick:H},null,8,["disabled"]),u("   ")])),_:1})],64))])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-d452edcc"]]);export{A as default};
