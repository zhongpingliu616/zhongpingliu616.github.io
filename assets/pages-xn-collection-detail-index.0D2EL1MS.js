import{_ as a}from"./Navigation.fXnM5b3z.js";import{_ as t,r as e,d as s,af as l,D as o,x as i,az as n,y as r,aA as c,$ as u,z as d,W as f,aj as p,o as g,g as m,j as _,f as x,k as h,t as y,u as b,n as v,U as w,b as F,l as k,F as C,C as D,E as z,m as I,K as j,c as N,ai as T,a as S,J as $,aB as A,Q as G,aC as M,B as L}from"./index-E36eYFUz.js";import{_ as R}from"./CxTag.DU_-stGW.js";import{_ as W}from"./production-details.j0Db-YC7.js";import{f as q,h as B}from"./xn.B6pvNNd_.js";const E=t({__name:"NftDetail",props:{collectionImage:{type:String,default:""},id:{type:[String,Number],default:""}},emits:["update:collectionImage"],setup(a,{emit:t}){e(!0);let j=e({});const N=t;let T=e(a.id);s((()=>{var a;if(!T.value){const t=l(),e=t[t.length-1],s=e.options||(null==(a=e.$page)?void 0:a.options)||{};T.value=s.id}T.value&&S()}));const S=async()=>{try{const a=await q({id:T.value});200===a.code?(j.value=(null==a?void 0:a.data.list)||{},N("update:collectionImage",j.value.image||"")):o({title:a.msg||"获取详情失败",icon:"none"})}catch(a){console.error("获取详情异常",a)}},$=async()=>{try{const a=await B({id:j.value.id,type:1==j.value.collect_status?2:1});200===a.code?(j.value.collect_status=1==j.value.collect_status?2:1,o({title:1==j.value.collect_status?"收藏成功":"已取消收藏",icon:"success"})):o({title:a.msg||"操作失败",icon:"none"})}catch(a){console.error("收藏操作异常",a),o({title:"操作失败",icon:"none"})}},A=()=>{console.log("客服")},G=()=>{1!=j.value.rush_status&&D({url:`/pages-xn/my/deposit?id=${j.value.id}`,success:a=>{a.eventChannel.emit("sendMarginDatas",{marginResultData:j.value})},fail:a=>{console.error("跳转失败",a)}})},M=()=>{if(1==j.value.rush_status)return D({url:`/pages-xn/my/deposit?id=${j.value.id}`,success:a=>{a.eventChannel.emit("sendMarginDatas",{marginResultData:j.value})},fail:a=>{console.error("跳转失败",a)}}),void o({title:"请支付押金后抢单",icon:"success"})},L=a=>{console.log("点击了正品保障",a)};return(a,t)=>{const e=z,s=i(r("u-col"),n),l=i(r("u-row"),c),o=I,D=i(r("CxTag"),R),N=i(r("u-card"),u),T=i(r("u-icon"),d),S=i(r("u-cell"),f),q=i(r("u-image"),p);return g(),m(C,null,[_(o,{class:"sold-info"},{default:x((()=>[_(N,{"border-radius":16,padding:20,"show-head":!1},{body:x((()=>[_(l,{justify:"space-between",class:"price-section"},{default:x((()=>[_(s,{span:"8"},{default:x((()=>[_(e,{class:"current-price"},{default:x((()=>[h("¥"+y(b(j).money),1)])),_:1}),_(e,{class:"original-price"},{default:x((()=>[h("¥"+y(b(j).new_money),1)])),_:1})])),_:1}),_(s,{span:"4",textAlign:"right"},{default:x((()=>[_(e,{class:"sales-info"},{default:x((()=>[h("已售"+y(b(j).total_sales)+"件",1)])),_:1})])),_:1})])),_:1}),_(o,{class:"title"},{default:x((()=>[h(y(b(j).name),1)])),_:1}),_(o,{class:"status-tags"},{default:x((()=>[_(D,{text:b(j).period||"",bgGradient:["rgba(248,163,29,0.1)","rgba(248,163,29,0.1)"]},null,8,["text","bgGradient"]),h("  "),_(D,{text:b(j).difficulty||"",bgGradient:["rgba(248,163,29,0.1)","rgba(248,163,29,0.1)"]},null,8,["text","bgGradient"])])),_:1})])),_:1})])),_:1}),_(o,{class:"commodity-welfare"},{default:x((()=>[_(o,{class:"cell-wrapper"},{default:x((()=>[_(S,{title:"正品保证",name:"正品保证",class:"welfare-item",border:!1,"custom-style":{padding:"16rpx 32rpx"},"title-style":{fontSize:"28rpx",fontWeight:500},onClick:L},{"right-icon":x((()=>[_(T,{name:"arrow-right",color:"#666",size:"36rpx"})])),_:1})])),_:1}),_(o,{class:"cell-wrapper"},{default:x((()=>[_(S,{title:"7天无理由退货",name:"7天无理由退货",class:"welfare-item",border:!1,"custom-style":{padding:"16rpx 32rpx"},"title-style":{fontSize:"28rpx",fontWeight:500},onClick:L},{"right-icon":x((()=>[_(T,{name:"arrow-right",color:"#666",size:"36rpx"})])),_:1})])),_:1})])),_:1}),_(o,{class:"creative-process"},{default:x((()=>[_(o,{class:"chain-title"},{default:x((()=>[_(q,{src:W,width:"30rpx",height:"30rpx",mode:"widthFix",radius:"50%"}),h("   制作详情 ")])),_:1}),_(N,{border:!1,"show-head":!1,padding:20,"border-radius":16,"custom-style":{background:"#fff",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",border:"2px solid #FFE185"}},{body:x((()=>[_(o,{class:"content-text",innerHTML:b(j).details},null,8,["innerHTML"])])),_:1},8,["custom-style"])])),_:1}),_(o,{class:"footer-bar"},{default:x((()=>[_(o,{class:"left-actions"},{default:x((()=>[_(o,{class:"action-item",onClick:$},{default:x((()=>[_(T,{name:"star",size:"60rpx",color:1==b(j).collect_status?"#FFD700":"#FFFFFF"},null,8,["color"]),_(e,{class:"action-text collect",style:v({color:1==b(j).collect_status?"#FFD700":"#FFFFFF"})},{default:x((()=>[h(y(1==b(j).collect_status?"已收藏":"收藏"),1)])),_:1},8,["style"])])),_:1}),_(o,{class:"action-item",onClick:A},{default:x((()=>[_(T,{name:"kefu-ermai",size:"60rpx",color:"#FFD700"}),_(e,{class:"action-text service"},{default:x((()=>[h("客服")])),_:1})])),_:1})])),_:1}),_(o,{class:"right-buttons"},{default:x((()=>[_(o,{class:w(["gradient-btn-item shopping-cart",{"authen-gray":1==b(j).rush_status}]),onClick:G},{default:x((()=>[_(o,{class:"gradient-button"}),_(o,{class:"button-inner"},{default:x((()=>[h(" 支付押金 "),1!=b(j).rush_status?(g(),F(o,{key:0,class:"update-tip"},{default:x((()=>[h(" 需要升等级 ")])),_:1})):k("",!0)])),_:1})])),_:1},8,["class"]),_(o,{class:w(["gradient-btn-item buy-now",{"authen-gray":1!=b(j).rush_status}]),onClick:M},{default:x((()=>[_(o,{class:"gradient-button"}),_(o,{class:"button-inner"},{default:x((()=>[h(" 一键抢单 ")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})],64)}}},[["__scopeId","data-v-235ed6a0"]]),H=t({__name:"index",setup(t){j((a=>({"95af0640":l})));const{proxy:s}=$(),l=s.$safeAreaInfo.top+80+"rpx";let o=e("作品详情"),n=e(""),c=e("NftDetail"),u=e(null);const d={NftDetail:E},f=N((()=>d[c.value])),p=()=>{};return T((({id:a,workType:t})=>{u.value=a})),(t,e)=>{const s=S("up-icon"),l=i(r("LayoutNavigation"),a),d=S("up-image"),m=I;return g(),F(m,{class:"page-wrap collection-detail",style:v({gridTemplateRows:"NftDetail"==b(c)&&"80rpx 1fr 120rpx"})},{default:x((()=>[_(l,{title:b(o)},A({_:2},["NftDetail"==b(c)?{name:"right",fn:x((()=>[_(s,{name:"share-square",size:"48rpx",color:"#fff",onClick:p})])),key:"0"}:void 0]),1032,["title"]),_(m,{class:"page-content"},{default:x((()=>[_(m,{class:"current-works"},{default:x((()=>[_(d,{class:"works-image",width:"680rpx",height:"700rpx",src:b(n)},null,8,["src"])])),_:1}),_(m,{class:"xiuniang-information"},{default:x((()=>[(g(),F(G,null,[(g(),F(r(b(f)),M({id:b(u)},{collectionImage:b(n),"onUpdate:collectionImage":e[0]||(e[0]=a=>L(n)?n.value=a:n=a)}),null,16,["collectionImage"]))],1024))])),_:1})])),_:1}),_(m)])),_:1},8,["style"])}}},[["__scopeId","data-v-b5dffa1b"]]);export{H as default};
