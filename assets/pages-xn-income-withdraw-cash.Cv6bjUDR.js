import{_ as a,o as e,b as l,n as t,A as o,Q as s,r as n,c,d as u,C as r,D as i,a as d,f as p,P as f,az as m,J as _,m as g,E as h,aq as b,j as x,u as v,k as y,t as k,Z as C,H as F,g as I,h as w,F as z,aY as S,I as j}from"./index-CFeN5XM9.js";import{_ as N}from"./Navigation.B6I6j3Nc.js";import{_ as U}from"./CxComfirmBtn.BA1OBJ6W.js";import{_ as $}from"./uni-icons.CBW_QvPB.js";const L=a({__name:"CxIconFont",props:{code:String,size:{type:String,default:"32rpx"},color:{type:String,default:"#333"}},setup:a=>(s,n)=>{const c=o;return e(),l(c,{class:"iconfont",style:t({fontSize:a.size,color:a.color}),innerHTML:a.code},null,8,["style","innerHTML"])}},[["__scopeId","data-v-85abb137"]]),X=a({__name:"withdraw-cash",setup(a){s((a=>({"04f251d9":X})));const{proxy:t}=f(),X=t.$safeAreaInfo.top+80+"rpx";let A=n("余额提现");n(22123),n(212334);const D=n(""),H=n(0),T=n([]),V=a=>a.toLocaleString("zh-CN",{minimumFractionDigits:2}),B=()=>{D.value=V(t.$globalUserInfoXn.amount),console.log("全部提现",D.value)},E=()=>{const a=Number(D.value);a<1&&0!==a&&(_("每次提现不得少于1元"),D.value="")},M=c((()=>{const a=Number(D.value);return a>=1&&a<=t.$globalUserInfoXn.amount})),Y=()=>{M.value&&(_("提现申请已提交，请等待到账"),T.value[H.value].id?S({amount:D.value,user_bank_id:T.value[H.value].id}).then((a=>{200===a.code?(_("提现申请已提交，请等待到账"),D.value=""):_({title:a.msg||"提现申请提交失败",icon:"none"})})):_("请选择提现方式"))},q=()=>{j({url:"/pages/xn/income/withdrawal-record"})};return u((()=>{(async()=>{const{code:a=9999,data:e,msg:l}=await m();200===a?(null==e?void 0:e.lists.length)>0&&e.lists.forEach((a=>{1==a.type?T.value.push({...a,name:a.account_name,icon:"&#xe607;",color:"#07c160"}):2==a.type?T.value.push({...a,name:a.account_name,icon:"&#xe60a;",color:"#1677FF"}):3==a.type&&T.value.push({...a,name:a.account_name,icon:"&#xe63f;",color:"#FFA937"})})):_({title:l||"数据加载失败",icon:"none"})})()})),(a,t)=>{const s=r(i("LayoutNavigation"),N),n=o,c=g,u=r(i("CxComfirmBtn"),U),f=d("up-input"),m=r(i("CxIconFont"),L),_=r(i("u-icon"),h),S=r(i("uni-icons"),$),j=r(i("u-button"),b);return e(),l(c,{class:"page-wrap withdraw-cash-page"},{default:p((()=>[x(s,{title:v(A)},null,8,["title"]),x(c,{class:"page-content"},{default:p((()=>[x(c,{class:"card balance-card"},{default:p((()=>[x(c,{class:"left"},{default:p((()=>[x(n,{class:"label"},{default:p((()=>[y("¥")])),_:1}),x(n,{class:"amount"},{default:p((()=>[y(k(V(a.$globalUserInfoXn.amount)),1)])),_:1})])),_:1}),x(c,{class:"right"},{default:p((()=>[x(c,{class:"cash-btn"},{default:p((()=>[x(u,{text:"提现记录",onClick:C(q,["stop"]),btnStyle:{height:"40rpx",width:"120rpx",padding:"0rpx 10rpx",background:"none",color:"#523027",borderColor:"#523027"},textStyle:{fontSize:"24rpx",fontWeight:"bold"}})])),_:1})])),_:1})])),_:1}),x(c,{class:"card amount-card"},{default:p((()=>[x(n,{class:"title"},{default:p((()=>[y("提现金额")])),_:1}),x(c,{class:"input-wrapper"},{default:p((()=>[x(n,{class:"yen"},{default:p((()=>[y("¥")])),_:1}),x(f,{modelValue:v(D),"onUpdate:modelValue":t[0]||(t[0]=a=>F(D)?D.value=a:null),type:"number",placeholder:"请输入提现金额",class:"input",onInput:E},null,8,["modelValue"]),x(n,{class:"all",onClick:B},{default:p((()=>[y("全部提现")])),_:1})])),_:1}),x(n,{class:"tip"},{default:p((()=>[y("可提现金额：¥"+k(V(a.$globalUserInfoXn.amount))+", 每次提现不得少于1元",1)])),_:1})])),_:1}),x(c,{class:"card method-card"},{default:p((()=>[x(n,{class:"title"},{default:p((()=>[y("提现方式")])),_:1}),x(c,{class:"method-list"},{default:p((()=>[(e(!0),I(z,null,w(v(T),((a,t)=>(e(),l(c,{key:t,class:"method-item",onClick:a=>(a=>{H.value=a})(t)},{default:p((()=>[x(c,{class:"left"},{default:p((()=>[x(m,{code:a.icon,size:"40rpx",color:a.color},null,8,["code","color"]),y("    "),x(n,null,{default:p((()=>[y(k(a.account_name)+" "+k(a.opening_bank),1)])),_:2},1024)])),_:2},1024),v(H)==t?(e(),l(_,{key:0,name:"checkmark-circle-fill",color:"#FF4D4F",size:"30rpx"})):(e(),l(S,{key:1,type:"circle",color:"#ccc",size:"30rpx"}))])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),x(c,{class:"submit-btn"},{default:p((()=>[x(j,{type:"error",shape:"circle",disabled:!v(M),onClick:Y},{default:p((()=>[y("立即提现")])),_:1},8,["disabled"])])),_:1})])),_:1}),x(c)])),_:1})}}},[["__scopeId","data-v-4d85224a"]]);export{X as default};
