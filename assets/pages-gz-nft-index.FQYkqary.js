import{r as a,_ as e,o as t,b as s,f as l,j as o,k as r,g as n,F as i,h as d,y as c,t as u,A as h,m,d as f,C as p,D as x,E as g,u as _,I as b,am as y}from"./index-DiJpDbC3.js";import{_ as C}from"./Navigation.CPbYaFbJ.js";import{_ as M}from"./ProductCol.DhwZ6BQw.js";import{_ as v}from"./ProductList.BN8gitTL.js";import{_ as w}from"./TitleList.CG6cdRUR.js";import{_ as A}from"./CxComfirmBtn.CPDBkoVY.js";import{i as I}from"./index.DC_akL4S.js";let k=null;const L={mounted(){this.initChart()},methods:{initChart(){const a=document.getElementById("chart");a&&(k=I(a),this.updateChart({tabsIndex:0}))},generateData(a){let e=100*Math.random(),t=[],s=[],l=[];for(let o=0;o<a;o++){let r=new Date;r.setDate(r.getDate()-(a-o)),s.push([r.getFullYear(),r.getMonth()+1,r.getDate()].join("/")),e=e+20*Math.random()-10;let n=Math.max(0,Math.round(e)+Math.round(Math.random()-.5)),i=Math.round(n+10*Math.random()-5),d=Math.round(n+10*Math.random()-5),c=Math.min(i,d)-5*Math.random(),u=Math.max(i,d)+5*Math.random(),h=Math.round(1e3*Math.random());t.push([i,d,c,u]),l.push(h)}return{dates:s,boxVals:t,volumes:l}},calculateMA(a,e){for(var t=[],s=0,l=e.boxVals.length;s<l;s++)if(s<a)t.push("-");else{for(var o=0,r=0;r<a;r++)o+=e.boxVals[s-r][1];t.push(o/a)}return t},updateChart(a,e,t,s){if(!k)return;const l=a?a.tabsIndex:0,o=0===l?30:1===l?60:90,r=this.generateData(o),n=r.boxVals[r.boxVals.length-1];if(n&&t){const a=r.boxVals[r.boxVals.length-2]?r.boxVals[r.boxVals.length-2][1]:n[0],e=((n[1]-a)/a*100).toFixed(2);t.callMethod("updatePriceInfo",{price:n[1].toFixed(2),change:e})}const{dates:i,boxVals:d,volumes:c}=r;console.log("图表数据：",r);const u={backgroundColor:"#fff",animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(255, 255, 255, 0.8)",position:function(a,e,t,s,l){const o={top:10};return o[["left","right"][+(a[0]<l.viewSize[0]/2)]]=30,o}},axisPointer:{link:[{xAxisIndex:"all"}],label:{backgroundColor:"#777"}},grid:[{left:"10%",right:"8%",height:"50%"},{left:"10%",right:"8%",top:"63%",height:"16%"}],xAxis:[{type:"category",data:i,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,data:r.dates,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:50,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",top:"85%",start:50,end:100}],series:[{name:"日K",type:"candlestick",data:d,itemStyle:{color:"#00C853",color0:"#FF4141",borderColor:"#00C853",borderColor0:"#FF4141"}},{name:"MA5",type:"line",data:this.calculateMA(5,r),smooth:!0,lineStyle:{opacity:.5}},{name:"MA10",type:"line",data:this.calculateMA(10,r),smooth:!0,lineStyle:{opacity:.5}},{name:"MA20",type:"line",data:this.calculateMA(20,r),smooth:!0,lineStyle:{opacity:.5}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,data:c,itemStyle:{color:a=>r.boxVals[a.dataIndex][1]>r.boxVals[a.dataIndex][0]?"#00C853":"#FF4141"}}]};k.setOption(u)}}},T=a=>{a.$renderjs||(a.$renderjs=[]),a.$renderjs.push("echarts"),a.mixins||(a.mixins=[]),a.mixins.push({beforeCreate(){this.echarts=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),a.mixins.push(L)},F={setup(){const e=a(0),t=a("80.36"),s=a(12.63),l=a({tabsIndex:0,data:{}});return{tabs:["日","周","月"],currentTab:e,currentPrice:t,priceChange:s,chartData:l,handleTabChange:a=>{e.value=a,l.value={tabsIndex:a,timestamp:Date.now()}},updatePriceInfo:a=>{a&&(t.value=a.price,s.value=a.change)}}}};T(F);const S=e(F,[["render",function(a,e,f,p,x,g){const _=h,b=m;return t(),s(b,{class:"trends-card"},{default:l((()=>[o(b,{class:"header"},{default:l((()=>[o(_,{class:"title"},{default:l((()=>[r("NFT")])),_:1}),o(b,{class:"tabs"},{default:l((()=>[(t(!0),n(i,null,d(p.tabs,((a,e)=>(t(),s(_,{key:e,class:c(["tab-item",{active:p.currentTab===e}]),onClick:a=>p.handleTabChange(e)},{default:l((()=>[r(u(a),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),o(b,{class:"price-section"},{default:l((()=>[o(_,{class:"price"},{default:l((()=>[r(u(p.currentPrice),1)])),_:1}),o(_,{class:c(["change",{up:p.priceChange>=0,down:p.priceChange<0}])},{default:l((()=>[r(u(p.priceChange>=0?"+":"")+u(p.priceChange)+"% ",1)])),_:1},8,["class"])])),_:1}),o(b,{class:"chart-container"},{default:l((()=>[o(b,{id:"chart",class:"chart-dom",prop:p.chartData,"change:prop":a.echarts.updateChart},null,8,["prop","change:prop"])])),_:1})])),_:1})}],["__scopeId","data-v-bc9063d5"]]),V=e({__name:"index",setup(e){const n=a("NFT"),i=a(!1),d=a([]),c=a("loadmore"),u=a("flower");let I=1,k=!0,L=!1;const T=async a=>{if(a){if(L)return;i.value=!0,I=1,k=!0}if(k&&!L){L=!0,c.value="loading";try{const e=await V(I,10);e&&Array.isArray(e.list)?(d.value=a?e.list:[...d.value,...e.list],I++,k=e.hasMore??!1,c.value=k?"loadmore":"nomore"):(a&&(d.value=[]),c.value="nomore")}catch(e){a||(c.value="loadmore"),console.error("加载失败:",e)}finally{L=!1,i.value=!1}}},F=({index:a,item:e})=>{b({url:`/pages/my/login?title=${e.title}&index=${a}`})},V=async(a,e)=>{await new Promise((a=>setTimeout(a,800)));return{list:Array.from({length:e},((t,s)=>({id:(a-1)*e+s+1,image:`https://picsum.photos/seed/${Math.random()}/120/80`,artist:"李柳柳",title:"东方美学 | 绣春花",price:666.66}))),hasMore:a<3}},j=()=>{T(!0)},D=()=>{k&&!L&&T()},P=()=>{console.log("查看交易记录")},N=()=>{console.log("立即购买")},$=()=>{console.log("连接钱包")};return f((()=>{T(!0)})),(a,e)=>{const f=p(x("LayoutNavigation"),C),b=h,I=p(x("u-icon"),g),k=m,L=p(x("CommonProductCol"),M),T=p(x("BaseProductList"),v),V=p(x("CommonTitleList"),w),R=p(x("CxComfirmBtn"),A),B=y;return t(),s(k,{class:"page-wrap index"},{default:l((()=>[o(f,{title:_(n)},null,8,["title"]),o(k,{class:"page-content"},{default:l((()=>[o(S),o(k,{class:"wallet-card"},{default:l((()=>[o(k,{class:"card-header"},{default:l((()=>[o(b,{class:"title"},{default:l((()=>[r("我的钱包")])),_:1}),o(k,{class:"more",onClick:P},{default:l((()=>[o(b,null,{default:l((()=>[r("交易记录")])),_:1}),o(I,{name:"arrow-right",color:"#999",size:"24"})])),_:1})])),_:1}),o(k,{class:"wallet-grid"},{default:l((()=>[o(k,{class:"grid-item"},{default:l((()=>[o(b,{class:"label"},{default:l((()=>[r("持有数量")])),_:1}),o(b,{class:"value"},{default:l((()=>[r("12306")])),_:1})])),_:1}),o(k,{class:"grid-item"},{default:l((()=>[o(b,{class:"label"},{default:l((()=>[r("资产总值(元)")])),_:1}),o(b,{class:"value"},{default:l((()=>[r("123.06")])),_:1})])),_:1}),o(k,{class:"grid-item"},{default:l((()=>[o(b,{class:"label"},{default:l((()=>[r("今日收益(元)")])),_:1}),o(b,{class:"value green"},{default:l((()=>[r("+123.06")])),_:1})])),_:1})])),_:1})])),_:1}),o(k,{class:"recommend-product"},{default:l((()=>[o(V,{title:"热门藏品",moreUrl:"/pages/my/login"},{default:l((()=>[o(k,{class:"recommend-content"},{default:l((()=>[o(T,{onOnScrollToLower:D,onOnRefresh:j,isRefreshing:_(i),loadStatus:_(c),iconType:_(u),enableRefresh:!1},{scrollContain:l((()=>[o(L,{colNum:2,productList:_(d),onClick:F},null,8,["productList"])])),_:1},8,["isRefreshing","loadStatus","iconType"])])),_:1})])),_:1})])),_:1}),o(k,{class:"exchange-card"},{default:l((()=>[o(k,{class:"card-header"},{default:l((()=>[o(b,{class:"title"},{default:l((()=>[r("纸币兑换")])),_:1}),o(b,{class:"subtitle"},{default:l((()=>[r("ERC-7498标准")])),_:1})])),_:1}),o(k,{class:"wallet-grid"},{default:l((()=>[o(k,{class:"grid-item"},{default:l((()=>[o(b,{class:"label"},{default:l((()=>[r("我的绣币")])),_:1}),o(b,{class:"value"},{default:l((()=>[r("12.30")])),_:1})])),_:1}),o(k,{class:"grid-item"},{default:l((()=>[o(b,{class:"label"},{default:l((()=>[r("兑换比例")])),_:1}),o(b,{class:"value"},{default:l((()=>[r("1:2")])),_:1})])),_:1}),o(k,{class:"grid-item"},{default:l((()=>[o(b,{class:"label"},{default:l((()=>[r("今日收益(元)")])),_:1}),o(b,{class:"value green"},{default:l((()=>[r("+12%")])),_:1})])),_:1})])),_:1}),o(k,{class:"action-btns"},{default:l((()=>[o(R,{text:"明细",btnStyle:{background:"linear-gradient(to right, #F3D89E, RGBA(245, 234, 201, 1)",color:"#805536"},onClick:N},null,8,["btnStyle"]),r("    "),o(R,{text:"兑换",btnStyle:{},onClick:N})])),_:1})])),_:1})])),_:1}),o(k,{class:"footer-bar"},{default:l((()=>[o(k,{class:"search-box"},{default:l((()=>[o(b,{class:"prefix"},{default:l((()=>[r("NFT")])),_:1}),o(B,{type:"text",placeholder:"",class:"input",disabled:""}),o(b,{class:"suffix"},{default:l((()=>[r("NFT")])),_:1})])),_:1}),o(k,{class:"footer-btns"},{default:l((()=>[o(R,{text:"立即购买",btnStyle:{background:"transparent",color:"#F3D89E"},onClick:N}),r("   "),o(R,{text:"连接钱包",btnStyle:{},onClick:$})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-39769f3e"]]);export{V as default};
